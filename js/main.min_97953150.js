var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},__extends=function(t,e){function i(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},__assign=Object.assign||function(t){for(var e,i=1,n=arguments.length;n>i;i++){e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},__rest=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i},__decorate=function(t,e,i,n){var r,s=arguments.length,a=3>s?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(r=t[o])&&(a=(3>s?r(a):s>3?r(e,i,a):r(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},__param=function(t,e){return function(i,n){e(i,n,t)}},__metadata=function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},__awaiter=function(t,e,i,n){function r(t){return t instanceof i?t:new i(function(e){e(t)})}return new(i||(i=Promise))(function(i,s){function a(t){try{h(n.next(t))}catch(e){s(e)}}function o(t){try{h(n["throw"](t))}catch(e){s(e)}}function h(t){t.done?i(t.value):r(t.value).then(a,o)}h((n=n.apply(t,e||[])).next())})},__generator=function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,s&&(a=2&i[0]?s["return"]:i[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,i[1])).done)return a;switch(s=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,s=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],s=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,s,a,o,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},__exportStar=function(t,e){for(var i in t)"default"===i||e.hasOwnProperty(i)||__createBinding(e,t,i)},__createBinding=Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]},__values=function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,s=i.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){r={error:o}}finally{try{n&&!n.done&&(i=s["return"])&&i.call(s)}finally{if(r)throw r.error}}return a},__spread=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__spreadArrays=function(){for(var t=0,e=0,i=arguments.length;i>e;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;i>e;e++)for(var s=arguments[e],a=0,o=s.length;o>a;a++,r++)n[r]=s[a];return n},__await=function(t){return this instanceof __await?(this.v=t,this):new __await(t)},__asyncGenerator=function(t,e,i){function n(t){g[t]&&(l[t]=function(e){return new Promise(function(i,n){u.push([t,e,i,n])>1||r(t,e)})})}function r(t,e){try{s(g[t](e))}catch(i){h(u[0][3],i)}}function s(t){t.value instanceof __await?Promise.resolve(t.value.v).then(a,o):h(u[0][2],t)}function a(t){r("next",t)}function o(t){r("throw",t)}function h(t,e){t(e),u.shift(),u.length&&r(u[0][0],u[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,g=i.apply(t,e||[]),u=[];return l={},n("next"),n("throw"),n("return"),l[Symbol.asyncIterator]=function(){return this},l},__asyncDelegator=function(t){function e(e,r){i[e]=t[e]?function(i){return(n=!n)?{value:__await(t[e](i)),done:"return"===e}:r?r(i):i}:r}var i,n;return i={},e("next"),e("throw",function(t){throw t}),e("return"),i[Symbol.iterator]=function(){return this},i},__asyncValues=function(t){function e(e){n[e]=t[e]&&function(n){return new Promise(function(r,s){n=t[e](n),i(r,s,n.done,n.value)})}}function i(t,e,i,n){Promise.resolve(n).then(function(e){t({value:e,done:i})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),n={},e("next"),e("throw"),e("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__setModuleDefault=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t["default"]=e},__importStar=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.hasOwnProperty.call(t,i)&&__createBinding(e,t,i);return __setModuleDefault(e,t),e},__importDefault=function(t){return t&&t.__esModule?t:{"default":t}},__classPrivateFieldGet=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,i),i},__reflect=function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i};!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){i(1),i(2),i(3),i(0),i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20);var n;!function(t){t[t.NULL=0]="NULL",t[t.LEVEL=1]="LEVEL",t[t.GAME=2]="GAME",t[t.WAITING=3]="WAITING",t[t.COVER=4]="COVER"}(n||(n={})),window.MainState=n;var r=function(t){function e(){var i=t.call(this)||this;i._ading=!1,i._isReady=!1,i.state=n.NULL,i.lastState=n.NULL,i.lastTime=0,e._inst=i,platform.showMidrollAd(),i.sortableChildren=!0,i.sortableChildren=!0,platform.onAudioInterruptionBegin(onAudioInterruptionBegin),platform.onAudioInterruptionEnd(onAudioInterruptionEnd);var r=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",r),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter);var s=egret.MainContext.instance.stage;return i.sortableChildren=!0,i.width=s.stageWidth,i.height=i.width/640*1136,i.y=s.stageHeight/2-i.height/2,console.log("视图宽高："+i.width+" "+i.height),i.isReady=!1,MyStorage.Inst,OtherStorage.Inst,i.SwitchState(n.NULL),i.once(egret.Event.ADDED_TO_STAGE,i.Start,i),i}return __extends(e,t),Object.defineProperty(e,"Inst",{get:function(){return e._inst},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ading",{get:function(){return this._ading},set:function(t){this._ading!=t&&(this._ading=t,SoundMain.Inst.BGMVolume(1==this._ading?0:.8),1==this.isReady&&(1==this._ading?AdMask.Inst:AdMask.Inst.Hide()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._isReady},set:function(t){this._isReady!=t&&(this._isReady=t,1==this._ading?AdMask.Inst.Show():AdMask.Inst.Hide())},enumerable:!1,configurable:!0}),e.prototype.Start=function(t){return __awaiter(this,void 0,void 0,function(){var t,e=this;return __generator(this,function(i){switch(i.label){case 0:return t=this,egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){console.log("egret.lifecycle.onPause"),egret.ticker.pause(),onAudioInterruptionBegin()},egret.lifecycle.onResume=function(){console.log("egret.lifecycle.onResume"),egret.ticker.resume(),onAudioInterruptionEnd()},[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.once(eui.UIEvent.COMPLETE,function(){t(0)},e)})];case 2:return i.sent(),[4,Util.LoadGroupRes(["common","asset2"])];case 3:return i.sent(),this.isReady=!0,this.addChild(Scene.Common.Inst),Scene.Common.Inst.Start(),this.SwitchState(n.COVER),platform.gameReady(),SoundMain.Inst.Start(),this.lastTime=(new Date).getTime(),this.addEventListener(egret.Event.ENTER_FRAME,this.Update,this),[2]}})})},e.prototype.SwitchState=function(t,e){return __awaiter(this,void 0,void 0,function(){var e,i;return __generator(this,function(r){switch(r.label){case 0:switch(e=this,null!=e.scene&&(e.removeChild(e.scene),e.scene.Stop(),e.scene=null),i=null,t){case n.GAME:0==GameMgr.Inst.gameMode?i=new Scene.Game.Main:2==GameMgr.Inst.gameMode&&(i=new Scene.Love.Main);break;case n.COVER:platform.showInterstitialAd(),i=new Scene.Cover.Main;break;case n.LEVEL:}return e.state!=n.WAITING&&(e.lastState=e.state),e.state=n.WAITING,null==i?[3,2]:(i.width=e.width,i.height=e.height,e.addChild(i),i.zIndex=10,i.x=e.width/2-i.width/2,i.y=e.height/2-i.height/2,[4,i.Start()]);case 1:r.sent(),e.scene=i,e.state=t,r.label=2;case 2:return[2]}})})},e.prototype.Update=function(){var t=new Date,e=t.getTime(),i=(e-this.lastTime)/1e3;i>.036&&(i=.036),this.lastTime=e,Scene.Common.Inst.Update(i,t.getFullYear(),t.getMonth(),t.getDate()),null!=this.scene&&this.scene.Update(i),platform.Update(i),MyStorage.Inst.onlineTime+=i},e._inst=null,e}(egret.DisplayObjectContainer);window.DogeMain=r,__reflect(r.prototype,"DogeMain",[]);var s=r;window.GMain=s},function(t,e){var i=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();window.AssetAdapter=i,__reflect(i.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(t,e){var i,i=window.egret;!function(t){t.p2Factor=10;var e=function(){function e(t,e,i){void 0===t&&(t=p2.Body.DYNAMIC),void 0===e&&(e=1),void 0===i&&(i=1);var n={mass:e,type:t,gravityScale:i};this._body=new p2.Body(n)}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._image.parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._image.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._image.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._image},set:function(e){this._image.x=e.x,this._image.y=e.y,this._body.position=[(this._image.x-this._image.parent.width/2)/t.p2Factor,(this._image.parent.height/2-this._image.y)/t.p2Factor]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._image.rotation},set:function(t){this._image.rotation=t,this._body.angle=-this._image.rotation/180*Math.PI},enumerable:!1,configurable:!0}),e.prototype.Start=function(t){this._body.velocity=[0,0],this._body.angularVelocity=0,this._body.setZeroForce()},e.prototype.Update=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._image.x=this._body.position[0]*t.p2Factor+this._image.parent.width/2,this._image.y=-this._body.position[1]*t.p2Factor+this._image.parent.height/2,this._image.rotation=-this._body.angle/Math.PI*180},e.prototype.Stop=function(){for(;this._body.shapes.length>0;)this._body.removeShape(this._body.shapes[0])},e}();t.DisplayBody=e,__reflect(e.prototype,"egret.DisplayBody",[]);var i=function(e){function i(){var t=e.call(this)||this;return t._bodyMap=new Map,t.sortableChildren=!0,t.width=t.height=640,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t}return __extends(i,e),i.prototype.Start=function(e){var i=this;this._world=new p2.World({gravity:[e.x/t.p2Factor,-e.y/t.p2Factor]}),this._world.on("beginContact",function(t){if(null!=i._bodyMap){var e=i._bodyMap.get(t.bodyA),n=i._bodyMap.get(t.bodyB);null!=e&&null!=e.onContact&&e.onContact(n),null!=n&&null!=n.onContact&&n.onContact(e)}}),this._world.applyDamping=!1,this._wall=new p2.Body({mass:0,type:p2.Body.STATIC,position:[0,0]});var n=640/t.p2Factor,r=new p2.Box({width:10,height:4*n});this._wall.addShape(r,[-n/2-5,0]);var s=new p2.Box({width:10,height:4*n});this._wall.addShape(s,[n/2+5,0]);var a=new p2.Box({width:n,height:10});this._wall.addShape(a,[0,n/2+5+2*n]);var o=new p2.Box({width:n,height:10});this._wall.addShape(o,[0,-n/2-5-2*n]),this._world.addBody(this._wall)},i.prototype.AddChild=function(t){this.addChild(t._image),t._image.zIndex=t._image.zIndex,this._world.addBody(t._body),this._bodyMap.set(t._body,t)},i.prototype.RemoveChild=function(t){this.removeChild(t._image),this._world.removeBody(t._body),this._bodyMap["delete"](t._body)},i.prototype.Update=function(t){for(var e=1.2*t/3,i=0;3>i;i++)this._world.step(e)},i.prototype.Stop=function(){this._bodyMap.clear(),this._world.clear(),this._world=null},i}(t.Sprite);t.DisplayBodyContainer=i,__reflect(i.prototype,"egret.DisplayBodyContainer",[])}(i||(i={})),window.egret=i},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);window.LoadingUI=i,__reflect(i.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(t,e){var i=function(){function t(){this.firstPlay=0,this.bgmOn=1,this.soundOn=1,this.Init(),this.InitSetting()}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),t.prototype.Init=function(){var e,i,n,r,s,a,o,h,l,g,u=localStorage.getItem("wangchai3_storage"),p=null;null!=u&&""!=u&&(p=JSON.parse(u)),null==p&&(p={curLv:0,otherLvs:[0,0],stars:[],gold:10,power:t.maxPower,lastPower:0,scores:[0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],otherStars:[[],[]],firstPlay:0,onlineTime:0,awardDate:[0,0]}),this._curLv=p.curLv,this._otherLvs=null!==(e=p.otherLvs)&&void 0!==e?e:[0,0],this._stars=null!==(i=p.stars)&&void 0!==i?i:[],this._otherStars=null!==(n=p.otherStars)&&void 0!==n?n:[[],[]],this.gold=null!==(r=p.gold)&&void 0!==r?r:10,this.scores=null!==(s=p.scores)&&void 0!==s?s:[0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],this.power=null!==(a=p.power)&&void 0!==a?a:t.maxPower,this.lastPower=null!==(o=p.lastPower)&&void 0!==o?o:0,this.firstPlay=null!==(h=p.firstPlay)&&void 0!==h?h:1,this.onlineTime=null!==(l=p.onlineTime)&&void 0!==l?l:0,this.awardDate=null!==(g=p.awardDate)&&void 0!==g?g:[0,0];var c=(new Date).getDate();this.awardDate[0]!=c&&(this.awardDate[1]=0,this.awardDate[0]=c),this._playLv=this._curLv,this._otherPlayLvs=[this._otherLvs[0],this._otherLvs[1]]},t.prototype.InitSetting=function(){var t=localStorage.getItem("wangchai3_setting"),e=null;null!=t&&""!=t&&(e=JSON.parse(t)),null==e&&(e={sound:this.soundOn,bgm:this.bgmOn}),this.soundOn=e.sound,null==this.soundOn&&(this.soundOn=1),this.bgmOn=e.bgm,null==this.bgmOn&&(this.bgmOn=1)},t.prototype.SaveSetting=function(){var t={sound:this.soundOn,bgm:this.bgmOn};localStorage.setItem("wangchai3_setting",JSON.stringify(t))},t.prototype.Save=function(){var t={curLv:this._curLv,otherLvs:this._otherLvs,stars:this.stars,gold:this.gold,power:this.power,lastPower:this.lastPower,scores:this.scores,otherStars:this._otherStars,firstPlay:this.firstPlay,onlineTime:this.onlineTime,awardDate:this.awardDate};try{localStorage.setItem("wangchai3_storage",JSON.stringify(t))}catch(e){}},Object.defineProperty(t.prototype,"curLv",{get:function(){return 0==GameMgr.Inst.gameMode?this._curLv:this._otherLvs[GameMgr.Inst.gameMode-1]},set:function(t){0==GameMgr.Inst.gameMode?this._curLv=t:this._otherLvs[GameMgr.Inst.gameMode-1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playLv",{get:function(){return 0==GameMgr.Inst.gameMode?this._playLv:this._otherPlayLvs[GameMgr.Inst.gameMode-1]},set:function(t){0==GameMgr.Inst.gameMode?this._playLv=t:this._otherPlayLvs[GameMgr.Inst.gameMode-1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stars",{get:function(){return 0==GameMgr.Inst.gameMode?this._stars:this._otherStars[GameMgr.Inst.gameMode-1]},enumerable:!1,configurable:!0}),t.maxPower=30,t.maxLv=11,t}();window.MyStorage=i,__reflect(i.prototype,"MyStorage",[]);var n=function(){function t(){this.Init()}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),t.prototype.Init=function(){var t,e,i,n=localStorage.getItem("wangchai3_othergame_storage"),r=null;null!=n&&""!=n&&(r=JSON.parse(n)),null==r&&(r={tetris:[0,[],[]],sodoku:[0,[],[]],killbee:[0,[2]]}),this.tetris=null!==(t=r.tetris)&&void 0!==t?t:[0,[],[]],this.sodoku=null!==(e=r.sodoku)&&void 0!==e?e:[0,[],[]],this.killbee=null!==(i=r.killbee)&&void 0!==i?i:[0,[2]]},t.prototype.Save=function(){var t={tetris:this.tetris,sodoku:this.sodoku,killbee:this.killbee};localStorage.setItem("wangchai3_othergame_storage",JSON.stringify(t))},t}();window.OtherStorage=n,__reflect(n.prototype,"OtherStorage",[])},function(t,e){var i=function(){function t(){this.IsIOS=!1}return t.prototype.Update=function(t){},t.prototype.naviTo=function(t){},t.prototype.showCustomAd=function(){},t.prototype.hideCustomAd=function(){},t.prototype.showAskModel=function(t,e,i,n){setTimeout(i,200)},t.prototype.showRewardedVideoAd=function(t,e){t(!0)},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.onAudioInterruptionBegin=function(t){},t.prototype.onAudioInterruptionEnd=function(t){},t.prototype.showToast=function(t){},t.prototype.showMidrollAd=function(){},t.prototype.moreGame=function(){},t.prototype.subPackage=function(t){return 0},t.prototype.showInterstitialAd=function(){},t.prototype.gameReady=function(){},t.prototype.RECStart=function(){},t.prototype.RECStop=function(){},t}();window.DebugPlatform=i,__reflect(i.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new i)},function(t,e){function i(){console.log("onAudioInterruptionBegin: "+r.Inst.NoChannel),0==r.Inst.NoChannel&&(console.log("audio stop"),r.Inst.NoChannel=!0,r.Inst.StopBGM(),r.Inst.StopSound())}function n(){console.log("onAudioInterruptionEnd: "+r.Inst.NoChannel),1==r.Inst.NoChannel&&(console.log("audio resume."),r.Inst.NoChannel=!1,1==r.Inst.isReady&&r.Inst.PlayBGM())}var r=function(){function t(){this._isReady=!1,this._lastBGMPos=0,this._bgmVolume=.8,this.NoChannel=!1,this.isReady=!1,this.channelMap=new Map}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReady",{get:function(){return this._isReady},set:function(t){this._isReady=t,1==this._isReady&&(this._bgm=RES.getRes("bg_mp3"),this._bgm.type=egret.Sound.MUSIC,this.PlayBGM(0))},enumerable:!1,configurable:!0}),t.prototype.PlaySound=function(t,e){if(void 0===e&&(e=!1),1!=this.NoChannel&&0!=this.isReady&&(1!=e||1!=this.channelMap.has(t))){console.log("play: "+t);var i=RES.getRes(t);if(null==i)return void console.warn("音效:"+t+"未加载.");if(1==e){var n=i.play(0,0);this.channelMap.set(t,n),n.volume=1==this.Sound?1:0}else{var n=i.play(0,1);n.volume=1==this.Sound?1:0}}},t.prototype.StopSound=function(t){var e,i;if(void 0===t&&(t=null),null==t){try{for(var n=__values(this.channelMap),r=n.next();!r.done;r=n.next()){var s=r.value,a=s[1];a.stop()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(i=n["return"])&&i.call(n)}finally{if(e)throw e.error}}this.channelMap.clear()}else if(1==this.channelMap.has(t)){var a=this.channelMap.get(t);a.stop(),this.channelMap["delete"](t)}},t.prototype.SoundVolume=function(t,e){if(1==this.channelMap.has(t)){var i=this.channelMap.get(t);i.volume=e}},Object.defineProperty(t.prototype,"Sound",{get:function(){return 1==MyStorage.Inst.soundOn},set:function(t){MyStorage.Inst.soundOn=1==t?1:0,MyStorage.Inst.SaveSetting()},enumerable:!1,configurable:!0}),t.prototype.PlayBGM=function(t){void 0===t&&(t=this._lastBGMPos),this.StopBGM(),t>0&&t<this._bgm.length?(this._bgmChannel=this._bgm.play(t,1),this._bgmChannel.once(egret.Event.SOUND_COMPLETE,this.onBGMComplete,this),this._lastBGMPos=0):this._bgmChannel=this._bgm.play(0),this._bgmChannel.volume=1==this.BGM?1:0},t.prototype.onBGMComplete=function(){this._bgmChannel.stop(),this._bgmChannel=this._bgm.play(0),this._bgmChannel.volume=1==this.BGM?1:0},t.prototype.StopBGM=function(){null!=this._bgmChannel&&(this._lastBGMPos=this._bgmChannel.position,this._bgmChannel.stop(),this._bgmChannel.removeEventListener(egret.Event.SOUND_COMPLETE,this.onBGMComplete,this),this._bgmChannel=null)},t.prototype.BGMVolume=function(t){console.log("bgm volume: "+t),this._bgmVolume=t,null!=this._bgmChannel&&(this._bgmChannel.volume=t)},Object.defineProperty(t.prototype,"BGM",{get:function(){return 1==MyStorage.Inst.bgmOn},set:function(t){MyStorage.Inst.bgmOn=1==t?1:0,MyStorage.Inst.SaveSetting(),null!=this._bgmChannel&&(this._bgmChannel.volume=1==t?1:0)},enumerable:!1,configurable:!0}),t.prototype.Start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,RES.loadGroup("sound")];case 1:return t.sent(),this.isReady=!0,[2]}})})},t}();window.SoundMain=r,__reflect(r.prototype,"SoundMain",[]),window.onAudioInterruptionBegin=i,window.onAudioInterruptionEnd=n},function(t,e){var i=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function s(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),i.call(n))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var o=t.split("/");o.pop();var h=o.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(h,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();window.ThemeAdapter=i,__reflect(i.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(t,e){var i=function(){function t(){}return t.LoadGroupRes=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(r){switch(r.label){case 0:for(e=[],i=0;i<t.length;i++)n=t[i],0==RES.isGroupLoaded(n)&&e.push(RES.loadGroup(n));return[4,Promise.all(e)];case 1:return r.sent(),[2]}})})},t.zeroPad=function(t,e){return("000000"+t).slice(-e)},t.RotateVec=function(e,i){var n=t.Normalize(e);if(0>=n)return e;var r=Math.atan2(e.y,e.x);r+=i,e.x=Math.cos(r)*n,e.y=Math.sin(r)*n},t.Normalize=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return e>0&&(t.x/=e,t.y/=e),e},t.LoadRes=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(r){switch(r.label){case 0:for(e=[],i=function(i){e.push(new Promise(function(e,n){RES.getResByUrl(t[i],e,null,RES.ResourceItem.TYPE_JSON)}))},n=0;n<t.length;n++)i(n);return[4,Promise.all(e)];case 1:return r.sent(),[2]}})})},t.DestroyGroupRes=function(t){return __awaiter(this,void 0,void 0,function(){var e,i,n;return __generator(this,function(r){switch(r.label){case 0:for(e=[],i=0;i<t.length;i++)n=t[i],1==RES.isGroupLoaded(n)&&e.push(RES.destroyRes(n,!0));return[4,Promise.all(e)];case 1:return r.sent(),[2]}})})},t.Clamp=function(t,e,i){return e>t?t=e:t>i&&(t=i),t},t.Dist=function(t,e){return void 0===e&&(e=null),null==e&&(e=t),Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.Dist2=function(t,e){return void 0===e&&(e=null),null==e&&(e=t),(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)},t.VecLength=function(t,e){return Math.sqrt(t*t+e*e)},t.AskFor=function(t,e){null!=e&&e()},t.RandomRange=function(t,e){return t>=e?t:Math.round(Math.random()*(e-t))+t},t.RegistBtnAnim=function(e){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onBtnDown,null),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onBtnUp,null),e.addEventListener(egret.TouchEvent.TOUCH_END,t.onBtnUp,null),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onBtnUp,null)},t.UnregistBtnAnim=function(e){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onBtnDown,null),e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,t.onBtnUp,null),e.removeEventListener(egret.TouchEvent.TOUCH_END,t.onBtnUp,null),e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onBtnUp,null)},t.onBtnDown=function(t){egret.Tween.removeTweens(t.target),egret.Tween.get(t.target).to({scaleX:1.1,scaleY:1.1},100)},t.onBtnUp=function(t){egret.Tween.removeTweens(t.target),egret.Tween.get(t.target).to({scaleX:1,scaleY:1},100)},t.DistPtToSegment=function(e,i){var n=t.Dist2(i[0],i[1]);if(0>=n)return t.Dist(e,i[0]);var r=((e.x-i[0].x)*(i[1].x-i[0].x)+(e.y-i[0].y)*(i[1].y-i[0].y))/n;return r=t.Clamp(r,0,1),t.Dist(e,{x:i[0].x+r*(i[1].x-i[0].x),y:i[0].y+r*(i[1].y-i[0].y)})},t.linesIntersect=function(t,e){var i=(t[1].x-t[0].x)*(e[1].y-e[0].y)-(e[1].x-e[0].x)*(t[1].y-t[0].y);if(0==i)return!1;var n=((e[1].y-e[0].y)*(e[1].x-t[0].x)+(e[0].x-e[1].x)*(e[1].y-t[0].y))/i,r=((t[0].y-t[1].y)*(e[1].x-t[0].x)+(t[1].x-t[0].x)*(e[1].y-t[0].y))/i;return r>0&&1>r&&n>0&&1>n},t.rectLineIntersect=function(e,i){return 1==t.linesIntersect(i,[{x:e.x,y:e.y},{x:e.x,y:e.y+e.height}])||1==t.linesIntersect(i,[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y}])||1==t.linesIntersect(i,[{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height}])||1==t.linesIntersect(i,[{x:e.x,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}])},t}();window.Util=i,__reflect(i.prototype,"Util",[])},function(t,e){var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.Show=function(){if(null==this.parent){var t=egret.MainContext.instance.stage;t.addChild(this),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=t.stageWidth/2,this.y=t.stageHeight/2}},e.prototype.Hide=function(){null!=this.parent&&this.parent.removeChild(this)},e}(eui.Component);window.AdMask=i,__reflect(i.prototype,"AdMask",["eui.UIComponent"])},function(t,e){var i=window.Scene;window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e=[["tetrisicon_jpg","俄罗斯方块","wxbf650964ae1058f1"],["sokobanicon_jpg","推箱子","wx573cdb9f9d8589d9"],["ttticon_jpg","井字棋","wxdf9ed9de6bfeb27e"],["ddzicon_jpg","豆地主","wx9a2b8873135d2f06"],["zombieicon_jpg","打僵尸","wx992b54ff4994c032"],["chickenicon_jpg","吃鸡","wx3f70c2e6c27a0ec3"],["danjiicon_png","单机小游戏","wx3906a799730ae2dc"]],i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._navi1=-1,e._navi0=-1,e.waitPower=-1,e}return __extends(i,t),Object.defineProperty(i,"Inst",{get:function(){if(null==i._inst){var t=new i;i._inst=t}return i._inst},enumerable:!1,configurable:!0}),i.prototype.Start=function(){this.zIndex=999,Util.RegistBtnAnim(this.grp_moregame),this.grp_moregame.addEventListener(egret.TouchEvent.TOUCH_TAP,platform.moreGame,platform),Util.RegistBtnAnim(this.grp_power),this.grp_power.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPower,this),this.UpdatePower()},Object.defineProperty(i.prototype,"navi1",{get:function(){return this._navi1},set:function(t){this._navi1!=t&&(this._navi1=t,this.img_navi1.texture=RES.getRes(e[this._navi1][0]),this.lbl_navi1.text=e[this._navi1][1])},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"navi0",{get:function(){return this._navi0},set:function(t){this._navi0!=t&&(this._navi0=t,this.img_navi0.texture=RES.getRes(e[this._navi0][0]),this.lbl_navi0.text=e[this._navi0][1])},enumerable:!1,configurable:!0}),i.prototype.onTapSokoban=function(){},i.prototype.onTapTetris=function(){},i.prototype.onTapPower=function(){var t=this;SoundMain.Inst.PlaySound("button_mp3"),platform.showRewardedVideoAd(function(e){1==e&&t.AddPower(Math.max(3,MyStorage.maxPower-MyStorage.Inst.power))},function(){})},i.prototype.Update=function(t,e,i,n){if(this.waitPower>0){this.waitPower-=t;var r=Math.floor(this.waitPower%60);this.waitPower<=0&&this.UpdatePower(),this.lbl_powerTime.text=Math.floor(this.waitPower/60)+":"+((10>r?"0":"")+r)+" +1"}},i.prototype.AddPower=function(t){MyStorage.Inst.power+=t,this.UpdatePower(),MyStorage.Inst.Save()},i.prototype.UsePower=function(t){void 0===t&&(t=3),MyStorage.Inst.power>=MyStorage.maxPower&&(MyStorage.Inst.lastPower=Math.floor((new Date).getTime()/1e3)),MyStorage.Inst.power-=t,this.UpdatePower(),this.lbl_power.text=""+MyStorage.Inst.power,MyStorage.Inst.Save()},i.prototype.UpdatePower=function(){var t=Math.floor((new Date).getTime()/1e3),e=t-MyStorage.Inst.lastPower;MyStorage.Inst.power>=MyStorage.maxPower?MyStorage.Inst.lastPower=t:(MyStorage.Inst.power+=Math.floor(e/120),MyStorage.Inst.lastPower=t-e%120,MyStorage.Inst.power>MyStorage.maxPower&&(MyStorage.Inst.power=MyStorage.maxPower)),MyStorage.Inst.power>=MyStorage.maxPower?(this.lbl_power.right=0,this.lbl_powerTime.visible=!1,this.waitPower=-1):(this.lbl_power.right=80,this.waitPower=120-e%120,this.lbl_powerTime.visible=!0),this.lbl_power.text=""+MyStorage.Inst.power},i}(eui.Component);t.Common=i,__reflect(i.prototype,"Scene.Common",["eui.UIComponent"])}(i||(i={})),window.Scene=i},function(t,e){var i=[{item:[[2,[565,85],-1],[3,[320,595],640,106,0],[1,[240,478]]],star:[3e3,0,50,80]},{item:[[2,[565,85],-1],[3,[320,615],490,65,0],[3,[38,474],75,346,0],[3,[603,474],75,346,0],[1,[320,519]]],star:[3e3,0,50,80]},{item:[[2,[75,85],1],[1,[320,309]],[4,[320,622],640,36,0],[5,[320,591],650,0]],star:[3e3,0,50,80]},{item:[[2,[565,85],-1],[3,[247.5,665],165,66,0],[3,[81.5,523],165,350,0],[3,[485,523],310,350,0],[1,[248,568]]],star:[3e3,0,50,80]},{item:[[2,[75,280],1],[4,[620,369],40,542,0],[5,[587.5,320],452,-90],[3,[300,591],600,114,0],[4,[320,49.000000000000014],640,98,0],[1,[380,470]]],star:[3e3,0,50,80]},{item:[[2,[320,85],-1],[3,[320,522],220,76,0],[4,[320,618],220,44,0],[1,[320,420]]],star:[3e3,0,50,80]},{item:[[2,[75,85],1],[3,[585,440],110,416,0],[3,[341,581],378,134,0],[1,[342,448]]],star:[3e3,0,50,80]},{item:[[2,[75,85],1],[3,[208,560],416,176,0],[3,[468.80253088604684,602.1618630667075],240,158.619,33],[3,[610,615.5],60,65,0],[1,[360,404]]],star:[3e3,0,50,80]},{item:[[2,[75,85],1],[3,[119.99999999999999,593],240,110,0],[3,[520,593],240,110,0],[3,[513,175],120,114,0],[1,[130,474]]],star:[3e3,0,50,80]},{item:[[2,[320,85],-1],[3,[470,244],96,96,0],[3,[320,593],240,110,0],[3,[170,244],96,96,0],[1,[320,474]]],star:[3e3,0,50,80]},{item:[[3,[320.5,593],203,110,0],[3,[80,593],160,110,0],[3,[560,593],160,110,0],[3,[106,244],96,96,0],[3,[534,244],96,96,0],[2,[565,474],-1],[2,[75,474],1],[1,[320,474]]],star:[3e3,0,50,80]},{item:[[3,[19.00465353132381,551.7125156361647],352.609,195.972,47.428],[3,[579.4567854772243,581.9576289833182],395.77,216.765,-40.728],[3,[292,659],194,100,0],[2,[568,320],-1],[1,[294,539]],[6,[50,356]]],star:[3e3,0,50,80]},{item:[[3,[320,576],194,144,0],[2,[568,94],-1],[1,[320,437]]],star:[3e3,0,50,80]},{item:[[3,[320.5,676],215,144,0],[3,[620.5,449],145,144,0],[3,[20.5,449],145,144,0],[2,[568,85],-1],[3,[553.9387655630185,527.5997102099152],259,155,-60],[3,[86.56123443698155,526.9002897900848],259,155,60],[1,[320,536]]],star:[3e3,0,50,80]},{item:[[3,[95.99999999999999,551.5],192,279,0],[3,[544,551.5],192,279,0],[2,[568,94],-1],[1,[320,173]]],star:[3e3,0,50,80]},{item:[[3,[90,440],180,106,0],[3,[550,440],180,106,0],[2,[568,94],-1],[1,[137,316]]],star:[3e3,0,50,80]},{item:[[3,[97.99999999999999,538],196,220,0],[2,[83,246],1],[4,[431.5,96.5],99,95,0],[1,[430,275]]],star:[3e3,0,50,80]},{item:[[3,[464,641.5],352,99,0],[2,[530,88],-1],[4,[555.4192754182916,213.03796997239252],464,51,-41.6],[1,[320,520]]],star:[3e3,0,50,80]},{item:[[3,[320,602],640,92,0],[2,[320,487],-1],[1,[320,108]]],star:[3e3,0,50,80]},{item:[[4,[155,592.5],310,95,0],[3,[125.67035459992496,484.8828377387316],375,92,33.8],[3,[585,600.5],110,95,0],[2,[86,85],1],[1,[190,325]]],star:[3e3,0,50,80]},{item:[[4,[148.87762365010593,575.4586015344687],441,502,60],[2,[86,85],1],[1,[366,259]]],star:[3e3,0,50,80]},{item:[[3,[110.5,321.5],221,107,0],[3,[456.5,604],367,88,0],[2,[86,92],1],[1,[426,488]]],star:[3e3,0,50,80]},{item:[[3,[430.5,604],419,88,0],[2,[569,85],-1],[1,[323,488]]],star:[3e3,0,50,80]},{item:[[4,[121.49730485643838,246.73357016819153],370,50,41.7],[4,[137.5,370],275,38,0],[3,[157.5,616],315,64,0],[2,[91,482],1],[1,[117,84]]],star:[3e3,0,50,80]}];
window.LvData=i;var n=[{item:[[3,[320,595],640,106,0],[1,[470,180]],[1,[170,180]]],star:[3e3,0,50,80]},{item:[[3,[490,595],300,106,0],[3,[170,523],340,250,0],[1,[500,498]],[1,[170,354]]],star:[3e3,0,50,80]},{item:[[3,[320,595],320,106,0],[3,[80.00000000000001,498],160,300,0],[3,[560,498],160,300,0],[1,[560,298]],[1,[80,298]]],star:[3e3,0,50,80]},{item:[[3,[197.62474727863489,583.2833710549108],452,226,11.4],[1,[328,240]],[1,[109,240]]],star:[3e3,0,50,80]},{item:[[1,[470,180]],[1,[170,180]],[4,[1.29893408435324e-14,640.1320343559643],300,300,45],[4,[214,640.1320343559643],300,300,45],[4,[426,640.1320343559643],300,300,45],[4,[640,640.1320343559643],300,300,45]],star:[3e3,0,50,80]},{item:[[3,[500,595],280,106,0],[3,[57,595],114,106,0],[1,[500,498]],[1,[235,270]]],star:[3e3,0,50,80]},{item:[[3,[57,548],114,200,0],[3,[583,548],114,200,0],[1,[440,270]],[1,[201,157]]],star:[3e3,0,50,80]},{item:[[1,[470,180]],[1,[170,180]],[4,[320,388],50,50,0]],star:[3e3,0,50,80]},{item:[[3,[56.99999999999999,120.5],114,75,0],[3,[583,120.5],114,75,0],[1,[440,400]],[1,[201,400]]],star:[3e3,0,50,80]},{item:[[3,[202,205.5],114,75,0],[3,[320,615.5],50,165,0],[3,[150,615.5],50,165,0],[3,[490,615.5],50,165,0],[3,[441,205.5],114,75,0],[1,[440,120]],[1,[201,120]],[4,[320,387],72,28,0]],star:[3e3,0,50,80]},{item:[[1,[470,180]],[1,[170,180]],[4,[320,472.60155108391484],155,155,45],[3,[527.5,567],253,228,0]],star:[3e3,0,50,80]},{item:[[3,[316.1135,191.579],270.547,62.276,0],[3,[349.5695,376.55100000000004],193.205,62.276,0],[1,[303.955,298.952]],[1,[244.088,113.71]],[3,[509.893,649.184],307.654,228,0],[3,[385.411403187136,669.055021534205],155.962,228,-43.84100000000001],[3,[-42.53885266331322,502.659748428874],215.376,228,63.124]],star:[3e3,0,50,80]},{item:[[3,[93.11349999999999,210.579],270.547,62.276,0],[3,[455.7315,376.55100000000004],63.529,62.276,0],[1,[162.088,130.71]],[3,[576.893,722],307.654,228,0],[3,[448.65709458949254,745.9380538858859],164.962,228,-43.84100000000001],[3,[.7820000000000107,722],215.376,228,0],[1,[530.344,559.972]]],star:[3e3,0,50,80]},{item:[[3,[149.873,210.579],136.388,62.276,0],[3,[319.694,442.57899999999995],191.388,62.276,0],[3,[488.1315,209.71200000000002],145.529,62.276,0],[1,[151.768,128.99]],[3,[654.4676067293842,662.6281256584344],350.962,228,-56.341999999999985],[3,[-18.14606660465522,664.3194582378208],358.248,228,59.244],[1,[492.437,130.45]]],star:[3e3,0,50,80]},{item:[[3,[551.2365,416.36699999999996],261.287,62.276,0],[3,[544.9245000000001,209.71200000000002],259.115,62.276,0],[1,[523.109,338.689]],[3,[321.087,710.256],657.14,228,0],[1,[492.437,130.45]]],star:[3e3,0,50,80]},{item:[[4,[1.29893408435324e-14,640.1320343559643],300,300,45],[4,[245,690.1320343559643],300,300,45],[4,[398,685.1320343559643],300,300,45],[3,[319.1435,532.867],156.287,105.276,0],[3,[70.39099999999999,185.06599999999997],185.464,62.278,0],[3,[552.5965,215.029],205.427,62.278,0],[4,[640,640.1320343559643],300,300,45],[4,[320.0075,135.811],42.015,300,0],[1,[97.826,106.29]],[1,[529.89,133.931]]],star:[3e3,0,50,80]},{item:[[4,[320,356.71067811865476],100,100,45],[3,[319.6435,691.3620000000001],201.287,105.276,0],[3,[70.39099999999999,185.06599999999997],185.464,62.278,0],[1,[97.826,106.29]],[1,[320,590]]],star:[3e3,0,50,80]},{item:[[4,[211,474.71067811865476],100,100,45],[3,[543.5615,437.52049999999997],226.329,56.289,0],[3,[77.59549999999999,185.06599999999997],199.873,62.278,0],[1,[97.826,106.29]],[1,[517.187,362.426]]],star:[3e3,0,50,80]},{item:[[3,[421.7645,274.553],163.529,62.276,0],[1,[191.393,199.235]],[3,[654.4676067293842,662.6281256584344],350.962,228,-56.341999999999985],[3,[-18.14606660465522,664.3194582378208],358.248,228,59.244],[1,[422.192,195.291]],[4,[319,149.5],38,299,0]],star:[3e3,0,50,80]},{item:[[4,[373.483,620.7935],38.284,299.515,0],[4,[373.341,487.74667811865476],100,100,45],[4,[250.341,358.74667811865476],100,100,45],[3,[77.59549999999999,208.06599999999997],199.873,62.278,0],[1,[97.826,129.29]],[3,[502.1645,709.0525],226.329,141.895,0],[1,[507.233,589.382]]],star:[3e3,0,50,80]}];window.LoveData=n;var r=[];window.EatData=r;var s=[[4,3,9,0,6,0,2,8,1,6,0,0,0,4,2,7,5,3,2,5,7,0,1,8,0,9,6,5,0,0,0,8,0,0,6,9,0,8,0,1,0,4,5,0,7,9,0,1,0,2,5,0,3,4,1,6,0,4,0,9,3,0,8,7,0,0,0,3,0,6,0,2,8,4,3,2,7,6,0,1,5],[0,0,0,2,0,0,9,3,0,0,0,6,5,3,9,1,8,4,0,3,0,8,0,1,6,7,2,2,8,0,6,7,5,0,9,0,0,0,0,0,0,0,2,1,7,9,0,0,4,1,0,5,6,8,0,0,5,0,0,0,0,0,6,4,0,0,0,2,3,0,5,9,0,0,0,7,0,0,3,4,1],[3,9,2,4,0,6,0,5,8,0,0,0,9,5,3,0,2,1,0,0,0,0,0,0,3,4,9,0,7,0,0,2,0,8,6,5,0,0,3,8,6,5,1,9,7,8,0,6,7,0,1,2,0,4,0,0,0,0,0,0,0,1,0,0,0,1,5,3,0,4,7,6,9,0,4,0,7,2,0,8,0],[0,0,0,0,4,0,6,0,7,9,0,0,6,2,3,1,4,8,8,6,0,1,5,0,2,3,9,1,0,0,7,9,5,0,6,2,0,4,5,0,0,8,0,7,0,6,0,0,0,0,0,5,8,3,0,0,3,0,7,6,0,9,5,5,0,0,0,3,0,7,2,4,0,9,2,0,8,4,0,1,6],[0,0,2,9,0,0,0,1,7,4,6,0,0,5,1,3,8,9,0,0,0,0,0,0,0,0,2,0,0,1,6,0,0,4,2,0,0,8,9,3,0,4,0,7,5,0,0,0,5,0,8,0,6,3,5,0,0,7,8,9,2,3,4,0,7,3,4,6,0,8,9,1,0,0,0,1,0,2,7,5,6],[5,0,0,2,4,7,0,6,1,0,0,0,6,0,9,5,3,7,0,0,1,3,8,0,0,2,4,0,4,0,0,2,1,7,0,0,0,0,8,5,3,4,1,9,6,0,9,0,8,0,6,0,0,5,0,2,0,0,0,3,0,7,9,3,0,4,7,9,0,0,5,8,0,0,0,0,6,8,0,1,2],[0,0,8,3,2,1,0,4,5,0,0,0,7,0,5,8,9,3,4,0,3,0,0,0,7,0,1,0,0,0,5,9,0,3,1,6,0,9,0,6,0,0,0,8,4,0,6,0,0,0,3,0,7,0,0,0,5,2,0,8,1,6,9,0,0,0,1,6,9,4,5,7,0,0,0,4,0,7,2,0,0],[0,0,0,6,0,7,0,2,4,0,0,0,0,1,4,9,7,6,6,0,4,0,2,9,8,5,1,0,5,0,1,0,0,7,0,8,0,0,0,0,9,0,2,0,3,8,0,0,0,7,2,1,0,5,0,0,0,2,3,1,4,8,0,3,0,0,9,8,5,6,0,7,0,9,0,0,4,6,5,3,0],[0,0,0,0,0,3,9,1,0,7,0,0,6,2,0,5,4,8,8,0,0,4,0,0,3,2,6,0,9,0,7,0,8,6,0,2,1,0,0,5,9,0,8,0,0,0,0,5,2,3,4,0,9,1,0,6,0,0,0,7,0,8,9,4,3,0,0,6,0,1,7,5,0,2,7,1,0,5,4,0,3],[3,9,0,6,2,4,0,8,0,4,0,0,7,1,3,6,0,2,0,0,1,8,0,9,3,7,4,0,0,0,5,0,8,9,1,0,5,3,0,0,6,1,0,4,7,0,0,0,9,3,0,5,2,0,0,0,2,3,8,6,7,5,0,0,8,0,0,9,5,2,6,1,0,0,0,0,7,0,4,3,0]];window.SodokuData=s;var a=function(){function t(){}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameMode",{get:function(){return this._gameMode},set:function(e){this._gameMode!=e&&(this._gameMode=e,0==this._gameMode?this.LvData=i:1==this._gameMode?this.LvData=r:2==this._gameMode?this.LvData=n:6==this._gameMode&&(this.LvData=s),null!=this.LvData&&(t.maxLv=this.LvData.length-1))},enumerable:!1,configurable:!0}),t.prototype.Request=function(){},t}();window.GameMgr=a,__reflect(a.prototype,"GameMgr",[])},function(t,e){var i,i=window.Scene;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.inited=!1,t.inited=!1,t}return __extends(i,e),Object.defineProperty(i,"Inst",{get:function(){if(null==i._inst){var t=new i;i._inst=t}return i._inst},enumerable:!1,configurable:!0}),i.prototype.Start=function(e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),__awaiter(this,void 0,void 0,function(){var r,s,a,o,h,l,g,u=this;return __generator(this,function(p){switch(p.label){case 0:if(e.addChild(this),i>0&&platform.showMidrollAd(),this.zIndex=998,0==this.inited&&(this.inited=!0,Util.RegistBtnAnim(this.grp_home),Util.RegistBtnAnim(this.grp_next),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2),this.x=e.width/2,this.y=e.height/2,this.grp_win.visible=this.grp_lose.visible=this.grp_pause.visible=!1,0==i)this.grp_pause.visible=!0,this.lbl_next.text="Continue",this.img_power.visible=this.lbl_power.visible=!1;else if(1==i)for(this.grp_win.visible=!0,this.lbl_next.text="Next Level",this.img_power.visible=this.lbl_power.visible=!0,r=0;3>r;r++)s=this["img_star"+r],s.texture=RES.getRes("uiart_json.settle_star"+(n>r?1:2)+"_png");else 2==i&&(this.grp_lose.visible=!0,this.lbl_next.text="Restart",this.img_power.visible=this.lbl_power.visible=!0);return this.grp_main.alpha=0,this.grp_main.scaleX=this.grp_main.scaleY=.5,egret.Tween.get(this.grp_main).to({alpha:1,scaleX:1,scaleY:1},300,egret.Ease.backOut),this.rt_bg.alpha=0,[4,new Promise(function(t){egret.Tween.get(u.rt_bg).to({alpha:.5},300).call(t)})];case 1:return p.sent(),o=function(){SoundMain.Inst.PlaySound("button_mp3"),a(4)},h=function(){SoundMain.Inst.PlaySound("button_mp3"),platform.showRewardedVideoAd(function(t){1==t&&a(5)},function(){})},l=function(){if(SoundMain.Inst.PlaySound("button_mp3"),0==i)a(0);else{if(MyStorage.Inst.power<3)return void platform.showToast("Not Enough Bones");t.Common.Inst.UsePower(),a(1)}},this.grp_home.once(egret.TouchEvent.TOUCH_TAP,o,null),this.grp_next.addEventListener(egret.TouchEvent.TOUCH_TAP,l,null),[4,new Promise(function(t){a=t})];case 2:return g=p.sent(),this.grp_home.removeEventListener(egret.TouchEvent.TOUCH_TAP,o,null),this.grp_next.removeEventListener(egret.TouchEvent.TOUCH_TAP,l,null),0!=g&&5!=g?[3,4]:(egret.Tween.get(this.grp_main).to({alpha:0,scaleX:.5,scaleY:.5},200,egret.Ease.sineIn),[4,new Promise(function(t){egret.Tween.get(u.rt_bg).to({alpha:0},200).call(t)})]);case 3:p.sent(),p.label=4;case 4:return e.removeChild(this),[2,g]}})})},i.prototype.onTapMain=function(){GMain.Inst.SwitchState(MainState.COVER)},i.prototype.Stop=function(){},i}(eui.Component);t.Pause=e,__reflect(e.prototype,"Scene.Pause",["eui.UIComponent"])}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Cover;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"star",{get:function(){return this._star},set:function(t){if(this._star=t,this._star<0)this.img_star0.texture=this.img_star1.texture=this.img_star2.texture=null;else for(var e=0;3>e;e++){var i=this["img_star"+e];e<this._star?i.texture=RES.getRes("uiart_json.star2_png"):i.texture=RES.getRes("uiart_json.star_png")}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lv",{get:function(){return this._lv},set:function(t){var e;return this._lv=t,this._lv>=GameMgr.Inst.LvData.length?void(this.visible=!1):(this.visible=!0,void(this._lv<=MyStorage.Inst.curLv?(this.lbl_lv.text=(this._lv+1).toString(),this.img_lock.visible=!1,this.star=null!==(e=MyStorage.Inst.stars[this.lv])&&void 0!==e?e:0,this.lbl_power.visible=this.img_power.visible=!0):(this.lbl_lv.text="",this.img_lock.visible=!0,this.star=-1,this.lbl_power.visible=this.img_power.visible=!1)))},enumerable:!1,configurable:!0}),e}(eui.Component);t.LvBtn=e,__reflect(e.prototype,"Scene.Cover.LvBtn",["eui.UIComponent"])}(e=t.Cover||(t.Cover={})),window.Cover=e}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Cover;!function(e){var i=[{id:0,price:98},{id:1,price:98},{id:2,price:98},{id:3,price:98},{id:4,price:98}],n=function(n){function r(){var t=n.call(this)||this;return t.lvBtns=[],t._curPage=-1,t.animTime=0,t}return __extends(r,n),Object.defineProperty(r.prototype,"curPage",{get:function(){return this._curPage},set:function(t){this._curPage=t;for(var e=0;10>e;e++){var i=this.lvBtns[e];i.lv=10*this._curPage+e}this.grp_leftPage.visible=this.curPage<=0?!1:!0,this.grp_rightPage.visible=this.curPage>=Math.floor((GameMgr.Inst.LvData.length-1)/10)?!1:!0},enumerable:!1,configurable:!0}),r.prototype.Start=function(){var t,i=null!==(t=MyStorage.Inst.scores[8])&&void 0!==t?t:0;MyStorage.Inst.scores[8]=i,this.animTime=0;for(var n=0;3>n;n++){var s=this["img_bee"+n];s.scaleX=s.scaleY=1.05,egret.Tween.get(s,{loop:!0}).to({scaleX:.95,scaleY:.95},Math.floor(200+200*Math.random()),egret.Ease.sineInOut).to({scaleX:1.05,scaleY:1.05},Math.floor(200+200*Math.random()),egret.Ease.sineInOut)}for(var a=10,o=170,h=145,l=3,g=this.grp_levels.width/2-(l-1)*o/2,u=this.grp_levels.height/2+0-(Math.ceil(a/l)-1)*h/2,n=0;a>n;n++){var p=new e.LvBtn;this.grp_levels.addChild(p),p.anchorOffsetX=p.width/2,p.anchorOffsetY=p.height/2,this.lvBtns.push(p),n==a-1?p.x=g+o:p.x=g+n%l*o,p.y=u+Math.floor(n/l)*h,Util.RegistBtnAnim(p),p.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapLv,this)}this.grp_levels.visible=!1,this.rt_level.visible=!1,Util.RegistBtnAnim(this.grp_start),this.grp_start.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapStart,this),Util.RegistBtnAnim(this.grp_love),this.grp_love.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapLove,this),this.img_love_ad.visible=MyStorage.Inst.scores[2]<0?!0:!1,Util.RegistBtnAnim(this.img_close),this.img_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapCloseLv,this),this.img_leftPage.horizontalCenter=10,egret.Tween.get(this.img_leftPage,{loop:!0}).to({horizontalCenter:-10},200,egret.Ease.sineOut).to({horizontalCenter:10},200),this.img_rightPage.horizontalCenter=-10,egret.Tween.get(this.img_rightPage,{loop:!0}).to({horizontalCenter:10},200,egret.Ease.sineOut).to({horizontalCenter:-10},200),Util.RegistBtnAnim(this.grp_leftPage),Util.RegistBtnAnim(this.grp_rightPage),this.grp_leftPage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPrevPage,this),this.grp_rightPage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapNextPage,this),r.Inst=this},r.prototype.onTapDoge2=function(){platform.showRewardedVideoAd(function(t){1==t&&MyStorage.Inst.awardDate[1]<299&&(MyStorage.Inst.awardDate[1]=299)},function(){})},r.prototype.onTapNextPage=function(){SoundMain.Inst.PlaySound("button_mp3"),this.curPage++},r.prototype.onTapPrevPage=function(){SoundMain.Inst.PlaySound("button_mp3"),this.curPage--},r.prototype.onTapStart=function(){SoundMain.Inst.PlaySound("button_mp3"),GameMgr.Inst.gameMode=0,this.curPage=Util.Clamp(Math.floor(MyStorage.Inst.playLv/10),0,Math.max(0,Math.floor((GameMgr.Inst.LvData.length-1)/10))),platform.showInterstitialAd(),egret.Tween.removeTweens(this.rt_level),egret.Tween.removeTweens(this.grp_levels),this.grp_levels.visible=!0,this.rt_level.visible=!0,this.grp_levels.scaleX=this.grp_levels.scaleY=.5,this.grp_levels.alpha=this.rt_level.alpha=0,egret.Tween.get(this.grp_levels).to({alpha:1,scaleX:1,scaleY:1},300,egret.Ease.backOut),egret.Tween.get(this.rt_level).to({alpha:.5},300)},r.prototype.onTapLove=function(){var t=this;return SoundMain.Inst.PlaySound("button_mp3"),MyStorage.Inst.scores[2]<0?void platform.showRewardedVideoAd(function(e){1==e&&(MyStorage.Inst.scores[2]=0,t.img_love_ad.visible=!1,MyStorage.Inst.Save())},function(){}):(GameMgr.Inst.gameMode=2,this.curPage=Util.Clamp(Math.floor(MyStorage.Inst.playLv/10),0,Math.max(0,Math.floor((GameMgr.Inst.LvData.length-1)/10))),platform.showInterstitialAd(),egret.Tween.removeTweens(this.rt_level),egret.Tween.removeTweens(this.grp_levels),this.grp_levels.visible=!0,this.rt_level.visible=!0,this.grp_levels.scaleX=this.grp_levels.scaleY=.5,this.grp_levels.alpha=this.rt_level.alpha=0,egret.Tween.get(this.grp_levels).to({alpha:1,scaleX:1,scaleY:1},300,egret.Ease.backOut),void egret.Tween.get(this.rt_level).to({alpha:.5},300))},r.prototype.onTapCloseLv=function(){var t=this;platform.showInterstitialAd(),SoundMain.Inst.PlaySound("button_mp3"),egret.Tween.removeTweens(this.rt_level),egret.Tween.removeTweens(this.grp_levels),egret.Tween.get(this.grp_levels).to({alpha:0,scaleX:.5,scaleY:.5},300,egret.Ease.backOut).call(function(){t.grp_levels.visible=!1,t.rt_level.visible=!1,platform.showInterstitialAd()}),egret.Tween.get(this.rt_level).to({alpha:0},300)},r.prototype.onTapLv=function(e){SoundMain.Inst.PlaySound("button_mp3");var i=e.target;if(i.lv<=MyStorage.Inst.curLv){if(MyStorage.Inst.power<3)return void platform.showToast("骨头不足");t.Common.Inst.UsePower(),MyStorage.Inst.playLv=i.lv,GMain.Inst.SwitchState(MainState.GAME)}},r.prototype.Update=function(t){return this.animTime+=t,0},r.prototype.Stop=function(){r.Inst=null,egret.Tween.removeTweens(this.rt_level),egret.Tween.removeTweens(this.grp_levels),egret.Tween.removeTweens(this.img_leftPage),egret.Tween.removeTweens(this.grp_rightPage),Util.UnregistBtnAnim(this.grp_leftPage),Util.UnregistBtnAnim(this.grp_rightPage),this.grp_leftPage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPrevPage,this),this.grp_rightPage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapNextPage,this),Util.UnregistBtnAnim(this.img_close),this.img_close.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapCloseLv,this),Util.UnregistBtnAnim(this.grp_love),this.grp_love.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapLove,this),Util.UnregistBtnAnim(this.grp_start),this.grp_start.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapStart,this);for(var t=0;t<this.lvBtns.length;t++){var e=this.lvBtns[t];this.grp_levels.removeChild(e),Util.UnregistBtnAnim(e),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapLv,this)}this.lvBtns.length=0},r.gunData=new eui.ArrayCollection(i),r}(eui.Component);e.Main=n,__reflect(n.prototype,"Scene.Cover.Main",["eui.UIComponent","Base"])}(e=t.Cover||(t.Cover={})),window.Cover=e}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Game;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.drawPts=[],e.drawPtNum=0,e.shape=4,e._image=new egret.Sprite,e._image.zIndex=10,e._image.width=e._image.height=640,e}return __extends(e,t),e.prototype.recDrawPt=function(t,e,i){void 0===i&&(i=!1),null==this.drawPts[this.drawPtNum]&&(this.drawPts[this.drawPtNum]=new egret.Point),this.drawPtNum>0&&Util.Dist({x:t,y:e},this.drawPts[this.drawPtNum-1])<(0==i?30:5)||(this.drawPts[this.drawPtNum].x=t,this.drawPts[this.drawPtNum].y=e,this.drawPtNum++)},e.prototype.ClearLine=function(){for(;this._body.shapes.length>0;)this._body.removeShape(this._body.shapes[0]);this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=this._image.height/2,this.pos={x:this._image.parent.width/2,y:this._image.parent.height/2},this.rotation=0,this.drawPtNum=0,this._image.graphics.clear(),this._image.graphics.lineStyle(8,0)},e.prototype.DrawLine=function(t,e,i){void 0===i&&(i=!1);var n=0;return this.recDrawPt(t,e,i),0==this.drawPtNum?this._image.graphics.moveTo(t,e):(this._image.graphics.beginFill(0,0),this._image.graphics.lineTo(t,e),this._image.graphics.endFill()),n},e.prototype.EndDrawLine=function(t){if(this.drawPtNum<=1)return this._image.graphics.clear(),!1;for(var e=0,i={x:0,y:0},n=0;n<this.drawPtNum-1;n++){var r=this.drawPts[n],s=this.drawPts[n+1],a=Util.Dist(r,s);e+=a,i.x+=(r.x+s.x)/2*a,i.y+=(r.y+s.y)/2*a}i.x/=e,i.y/=e,this._image.anchorOffsetX=i.x,this._image.anchorOffsetY=i.y,this._body.mass=Util.Clamp(t/500,2,5),this.pos={x:i.x,y:i.y};for(var n=0;n<this.drawPtNum-1;n++){var r={x:this.drawPts[n].x-i.x,y:-(this.drawPts[n].y-i.y)},s={x:this.drawPts[n+1].x-i.x,y:-(this.drawPts[n+1].y-i.y)},o=new p2.Box({width:Util.Dist(r,s)/egret.p2Factor,height:10/egret.p2Factor});this._body.addShape(o,[(r.x+s.x)/2/egret.p2Factor,(r.y+s.y)/2/egret.p2Factor],Math.atan2(s.y-r.y,s.x-r.x))}return!0},e.prototype.IntersectMe=function(t,e){return!1},e.prototype.Stop=function(){this.ClearLine()},e}(egret.DisplayBody);t.Item0=e,__reflect(e.prototype,"Scene.Game.Item0",["IItem"]);var i=function(t){function e(){var e=t.call(this)||this;return e.id=1,e.dogeType=1,e.animTime=0,e._bodyRadius=70,e.shape=0,e._image=new egret.Bitmap,e._image.zIndex=9,e._image.width=e._image.height=144,e._image.anchorOffsetX=e._image.width/2,e._image.anchorOffsetY=e._image.height/2,e._bodyRadius=e._image.width/2*.973,e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t){switch(t){case 0:this._image.texture=RES.getRes("game0_json.dog_"+this.dogeType+"_1_png"),this._image.visible=!0;break;case 1:this._image.texture=RES.getRes("game0_json.dog_bite_"+this.dogeType+"_1_png");break;case 2:this._image.texture=RES.getRes("game0_json.dog_"+this.dogeType+"_7_png");break;case 3:this._image.visible=!1;break;case 5:this._image.texture=RES.getRes("game0_json.dog_panic_"+this.dogeType+"_1_png")}this._state=t,this.animTime=0}},enumerable:!1,configurable:!0}),e.prototype.Start=function(e){this._rndTime=100*Math.random();var i=new p2.Circle({radius:this._bodyRadius/egret.p2Factor});this._body.addShape(i),t.prototype.Start.call(this,e),this.pos={x:e[1][0],y:e[1][1]},this.rotation=0,this.animTime=0,this.state=0},e.prototype.Update=function(e){switch(t.prototype.Update.call(this,e),this.state){case 0:this._image.texture=RES.getRes("game0_json.dog_"+this.dogeType+"_"+(Math.floor(6*(this.animTime+this._rndTime)%6)+1)+"_png");break;case 1:this.animTime>.5&&(this.state=4);break;case 2:this._image.visible=Math.floor(20*this.animTime)%2==0,this.animTime>.6&&(this.state=3);break;case 4:this._image.texture=RES.getRes("game0_json.dog_bite_"+this.dogeType+"_"+(Math.floor(6*(this.animTime+this._rndTime)%2)+2)+"_png");break;case 5:this._image.texture=RES.getRes("game0_json.dog_panic_"+this.dogeType+"_"+(Math.floor(6*(this.animTime+this._rndTime)%3)+1)+"_png")}this.animTime+=e},e.prototype.onContact=function(t){5==this.state&&(t instanceof a||t instanceof o?(SoundMain.Inst.PlaySound("dog_mp3"),this.state=2):t instanceof h&&(SoundMain.Inst.PlaySound("dog_mp3"),this.state=1))},e.prototype.IntersectMe=function(t,e){if(null==t){var i=Util.Dist(e,this);if(i<=this._bodyRadius+5)return!0}else if(Util.DistPtToSegment(this,[t,e])<=this._bodyRadius+5)return!0;return!1},e}(egret.DisplayBody);t.Item1=i,__reflect(i.prototype,"Scene.Game.Item1",["IItem"]);var n=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.id=2,e.exitPt=new egret.Point,e.shape=-1,e._image=new egret.Bitmap,e._image.zIndex=7,e._image.width=e._image.height=144,e._image.anchorOffsetX=e._image.width/2,e._image.anchorOffsetY=e._image.height/2,e._image.texture=RES.getRes("game0_json.cellular_1_png"),e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this._image.scaleX=-Math.sign(t[2]),this.exitPt.y=0,this._image.scaleX<0?this.exitPt.x=24:this.exitPt.x=-24},e.prototype.IntersectMe=function(t,e){var i=72;if(null==t){var n=Util.Dist(e,this);if(i+5>=n)return!0}else if(Util.DistPtToSegment(this,[t,e])<=i+5)return!0;return!1},e}(egret.DisplayBody);t.Item2=n,__reflect(n.prototype,"Scene.Game.Item2",["IItem"]);var r=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.id=3,e.tempPt=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=1,e._image=new egret.Bitmap,e._image.texture=RES.getRes("game0_json.ground_png"),e._image.anchorOffsetY=16,e._image.scale9Grid=new egret.Rectangle(1,33,98,66),e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this.rotation=t[4],this._image.width=t[2],this._image.height=t[3],this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=(this._image.height-16)/2+16;var e=new p2.Box({width:this._image.width/egret.p2Factor,height:(this._image.height-16)/egret.p2Factor});this._body.addShape(e)},e.prototype.IntersectMe=function(t,e){if(this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),this.tempRect.x=-this._image.width/2-5,this.tempRect.y=-(this._image.height-16)/2-5,this.tempRect.width=this._image.width+10,this.tempRect.height=this._image.height-16+10,1==this.tempRect.containsPoint(this.tempPt))return!0;if(null!=t){var i={x:t.x-this.x,y:t.y-this.y};if(Util.RotateVec(i,-this.rotation/180*Math.PI),1==Util.rectLineIntersect(this.tempRect,[i,this.tempPt]))return!0}return!1},e}(egret.DisplayBody);t.Item3=r,__reflect(r.prototype,"Scene.Game.Item3",["IItem"]);var s=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.shapeType=1,e.id=4,e.tempPt=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=1,e._image=new eui.Rect,e._image.fillColor=11830881,e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this.rotation=t[4],this._image.width=t[2],this._image.height=t[3],this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=this._image.height/2;var e=new p2.Box({width:this._image.width/egret.p2Factor,height:this._image.height/egret.p2Factor});this._body.addShape(e)},e.prototype.IntersectMe=function(t,e){if(this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),this.tempRect.x=-this._image.width/2-5,this.tempRect.y=-this._image.height/2-5,this.tempRect.width=this._image.width+10,this.tempRect.height=this._image.height+10,1==this.tempRect.containsPoint(this.tempPt))return!0;if(null!=t){var i={x:t.x-this.x,y:t.y-this.y};if(Util.RotateVec(i,-this.rotation/180*Math.PI),1==Util.rectLineIntersect(this.tempRect,[i,this.tempPt]))return!0}return!1},e}(egret.DisplayBody);t.Item4=s,__reflect(s.prototype,"Scene.Game.Item4",["IItem"]);var a=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.id=5,e.tempPt=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=1,e._image=new egret.Bitmap,e._image.height=25,e._image.fillMode=egret.BitmapFillMode.REPEAT,e._image.texture=RES.getRes("game0_json.editor_thorn_png"),e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this.rotation=t[3],this._image.width=t[2],this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=this._image.height/2;var e=new p2.Box({width:this._image.width/egret.p2Factor,height:this._image.height/egret.p2Factor});this._body.addShape(e)},e.prototype.IntersectMe=function(t,e){if(this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),this.tempRect.x=-this._image.width/2-5,this.tempRect.y=-this._image.height/2-5,this.tempRect.width=this._image.width+10,this.tempRect.height=this._image.height+10,1==this.tempRect.containsPoint(this.tempPt))return!0;if(null!=t){var i={x:t.x-this.x,y:t.y-this.y};if(Util.RotateVec(i,-this.rotation/180*Math.PI),1==Util.rectLineIntersect(this.tempRect,[i,this.tempPt]))return!0}return!1},e}(egret.DisplayBody);t.Item5=a,__reflect(a.prototype,"Scene.Game.Item5",["IItem"]);var o=function(t){function e(){var e=t.call(this)||this;return e.shapeType=0,e.id=6,e.shape=0,e._image=new egret.Bitmap,e._image.width=e._image.height=100,e._image.anchorOffsetX=e._image.width/2,e._image.anchorOffsetY=e._image.height/2,e._image.texture=RES.getRes("game0_json.editor_thornball_png"),e}return __extends(e,t),e.prototype.Start=function(e){var i=new p2.Circle({radius:50/egret.p2Factor});this._body.addShape(i),t.prototype.Start.call(this,e),this.pos={x:e[1][0],y:e[1][1]},this.rotation=0},e.prototype.IntersectMe=function(t,e){var i=50;if(null==t){var n=Util.Dist(e,this);if(i+5>=n)return!0}else if(Util.DistPtToSegment(this,[t,e])<=i+5)return!0;return!1},e}(egret.DisplayBody);t.Item6=o,__reflect(o.prototype,"Scene.Game.Item6",["IItem"]);var h=function(t){function e(){var e=t.call(this,p2.Body.DYNAMIC,1,0)||this;return e.id=7,e.animTime=0,e.dir=new egret.Point,e.moveSpd=25,e.shape=0,e._image=new egret.Bitmap,e._image.zIndex=8,e._image.width=e._image.height=48,e._image.anchorOffsetX=e._image.width/2,e._image.anchorOffsetY=e._image.height/2,e._image.scaleX=-1,e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t){switch(t){case 0:this._image.texture=RES.getRes("game0_json.bees_1_1_png"),this.moveDir={x:10+Math.random()*(this.parent.width-20)-this.parent.width/2,y:10+Math.random()*(this.parent.height-20)-this.parent.height/2},Util.Normalize(this.moveDir),this._body.velocity=[this.moveDir.x*this.moveSpd,-this.moveDir.y*this.moveSpd];break;case 1:var e=((Math.atan2(-this.moveDir.y,-this.moveDir.x)/Math.PI*180+360)%360+(-90+180*Math.random()))/180*Math.PI;this.moveDir={x:Math.cos(e),y:Math.sin(e)},Util.Normalize(this.moveDir),this._body.velocity=[this.moveDir.x*this.moveSpd*2,-this.moveDir.y*this.moveSpd*2]}this._state=t,this.animTime=0}},enumerable:!1,configurable:!0}),e.prototype.Start=function(e){var i=new p2.Circle({radius:20/egret.p2Factor});this._body.addShape(i),t.prototype.Start.call(this,e),this.pos={x:e[1][0]+(-5+10*Math.random()),y:e[1][1]+(-5+10*Math.random())},this.rotation=0,this.animTime=0,this.state=0},e.prototype.Update=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._image.x=this._body.position[0]*egret.p2Factor+this._image.parent.width/2,this._image.y=-this._body.position[1]*egret.p2Factor+this._image.parent.height/2},e.prototype.UpdateBody=function(t,e){switch(this.state){case 0:for(var i=null,n=999,r=0;r<e.length;r++){var s=e[r],a=Util.Dist(s,this);n>a&&(n=a,i=s)}var o=null==i?{x:10+Math.random()*(this.parent.width-20)-this.parent.width/2,y:10+Math.random()*(this.parent.height-20)-this.parent.height/2}:{x:i.x-this.x,y:i.y-this.y},h=(Math.atan2(o.y,o.x)/Math.PI*180+360)%360,l=(Math.atan2(this.moveDir.y,this.moveDir.x)/Math.PI*180+360)%360;if(h-l>180?h-=360:l-h>180&&(l-=360),h>l){var g=l+180*t;l=g>=h?h:g}else{var g=l-180*t;l=h>=g?h:g}this.moveDir.x=Math.cos(l/180*Math.PI),this.moveDir.y=Math.sin(l/180*Math.PI),this._body.velocity=[this.moveDir.x*this.moveSpd,-this.moveDir.y*this.moveSpd];break;case 1:this.animTime>.08&&(this.state=0);break;case 2:}var u=Math.atan2(this.moveDir.y,this.moveDir.x)/Math.PI*180;u>-90&&90>u?(this._image.scaleX=-1,this.rotation=u+90):(this._image.scaleX=1,this.rotation=u+90),this._image.texture=RES.getRes("game0_json.bees_1_"+(Math.floor(50*this.animTime%5)+1)+"_png"),this.animTime+=t},e.prototype.onContact=function(){2!=this.state&&(this.state=1)},e.prototype.IntersectMe=function(t,e){return!1},e.prototype.Stop=function(){t.prototype.Stop.call(this)},e}(egret.DisplayBody);t.Item7=h,__reflect(h.prototype,"Scene.Game.Item7",["IItem"]);var l=[e,i,n,r,s,a,o,h],g=function(){function t(){this.itemMap=new Map}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),t.prototype.Pop=function(t,e){var i,n=t[0],r=this.itemMap.get(n);return null==r?i=new l[n]:(i=r.pop(),r.length<=0&&this.itemMap["delete"](n)),e.AddChild(i),i.Start(t),i},t.prototype.Push=function(t){t.Stop(),null!=t.parent&&t.parent.RemoveChild(t),0==this.itemMap.has(t.id)&&this.itemMap.set(t.id,[]);var e=this.itemMap.get(t.id);e.push(t)},t}();t.ItemPool=g,__reflect(g.prototype,"Scene.Game.ItemPool",[])}(e=t.Game||(t.Game={})),window.Game=e}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Game;!function(e){var i;!function(t){t[t.Null=0]="Null",t[t.Wait=1]="Wait",t[t.Drawing=2]="Drawing",t[t.Timing=3]="Timing",t[t.Deading=4]="Deading",t[t.Deading2=5]="Deading2",t[t.Over=6]="Over"}(i||(i={})),window.PlayState=i;var n=function(n){function r(){var t=n.call(this)||this;return t.isPause=!1,t.stateTime=0,t._state=i.Null,t._gameTime=0,t.fullInkLength=0,t._curInkLength=0,t.inkLevels=[],t.inkPercents=[],t.beeInterval=.2,t.curBeeInterval=0,t.isDrawing=!1,t.isValidDraw=.01,t.lastDrawPt=new egret.Point(-1,-1),t.tempPt=new egret.Point,t.tempRect=new egret.Rectangle,t}return __extends(r,n),r.prototype.onTapPause=function(){SoundMain.Inst.PlaySound("button_mp3"),this.onGameOver(0)},r.prototype.onGameOver=function(e,i){return void 0===i&&(i=0),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return platform.showInterstitialAd(),1==this.isPause?[2]:(this.isPause=!0,[4,t.Pause.Inst.Start(GMain.Inst,e,i)]);case 1:return n=r.sent(),0==n?this.isPause=!1:5==n?this.isPause=!1:4==n?GMain.Inst.SwitchState(MainState.COVER):1==n&&GMain.Inst.SwitchState(MainState.GAME),[2]}})})},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t){switch(this._state==i.Timing?(egret.Tween.removeTweens(this.grp_clock),this.grp_clock.rotation=0,this.grp_clock.scaleX=this.grp_clock.scaleY=1,t==i.Over,SoundMain.Inst.StopSound("bees_mp3")):this._state==i.Drawing&&(this.grp_touch.touchEnabled=!1),t){case i.Wait:this.grp_touch.touchEnabled=!0,this.grp_clock.visible=!1;for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];n.state=0}break;case i.Drawing:break;case i.Timing:for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];n.state=5}this.gameTime=10,this.grp_clock.visible=!0,egret.Tween.get(this.grp_clock,{loop:!0}).to({scaleX:.8,scaleY:.8},500,egret.Ease.sineInOut).to({scaleX:1,scaleY:1},500,egret.Ease.sineInOut),egret.Tween.get(this.grp_clock,{loop:!0}).to({rotation:-30},180,egret.Ease.sineOut).to({rotation:20},300,egret.Ease.sineInOut).to({rotation:-10},180,egret.Ease.sineInOut).to({rotation:0},60,egret.Ease.sineInOut).wait(300),SoundMain.Inst.PlaySound("bees_mp3",!0);
break;case i.Over:for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];5==n.state&&(n.state=0)}}this.stateTime=0,this._state=t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"gameTime",{get:function(){return this._gameTime},set:function(t){this._gameTime=Math.max(0,t),this.lbl_clock.text=Math.ceil(this._gameTime).toString()},enumerable:!1,configurable:!0}),r.prototype.Start=function(){this.grp_game=new egret.DisplayBodyContainer,this.addChildAt(this.grp_game,2),this.grp_game.Start({x:0,y:500}),this.grp_game.x=this.width/2,this.grp_game.y=this.height/2,Util.RegistBtnAnim(this.img_pause),this.img_pause.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPause,this),Util.RegistBtnAnim(this.grp_next),this.grp_next.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapAdWin,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLineBegin,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onLineMove,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_END,this.onLineEnd,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onLineEnd,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onLineEnd,this);var t=e.ItemPool.Inst.Pop([0],this.grp_game);this.items=[t],this.bees=[],this.nests=[],this.dogs=[];var n=MyStorage.Inst.playLv,r=GameMgr.Inst.LvData[n];this.initInk(r.star);for(var s=r.item,a=0;a<s.length;a++){var o=s[a],h=e.ItemPool.Inst.Pop(o,this.grp_game);h instanceof e.Item1?this.dogs.push(h):h instanceof e.Item2?this.nests.push(h):this.items.push(h)}if(this.rt_unableLine.visible=!1,this.fullDogNum=this.dogs.length,this.state=i.Wait,0==MyStorage.Inst.playLv&&0==MyStorage.Inst.curLv){this.grp_guide.visible=!0;for(var a=this.ani_guide.items.length-1;a>=0;a--){var l=this.ani_guide.items[a];l.play()}}else this.grp_guide.visible=!1},r.prototype.onTapAdWin=function(){return SoundMain.Inst.PlaySound("button_mp3"),MyStorage.Inst.power<5?void platform.showToast("骨头不足"):(MyStorage.Inst.playLv==MyStorage.Inst.curLv&&(MyStorage.Inst.curLv=Math.min(GameMgr.maxLv,MyStorage.Inst.curLv+1)),t.Common.Inst.UsePower(5),MyStorage.Inst.playLv=Math.min(GameMgr.maxLv,MyStorage.Inst.playLv+1),void this.onGameOver(1))},Object.defineProperty(r.prototype,"curInkLength",{get:function(){return this._curInkLength},set:function(t){this._curInkLength=Math.max(0,t),this.pb_ink.value=this._curInkLength/this.fullInkLength*100;for(var e=0;3>e;e++){var i=this.pb_ink["img_star"+(2-e)];this._curInkLength>=this.inkLevels[e]?i.texture=RES.getRes("uiart_json.star2_png"):i.texture=RES.getRes("uiart_json.star_png")}},enumerable:!1,configurable:!0}),r.prototype.initInk=function(t){this.inkLevels=[],this.fullInkLength=t[0];for(var e=2;e>=0;e--){var i=this.pb_ink["img_star"+e];i.x=t[e+1]/100*this.pb_ink.width,this.inkLevels.push(t[e+1]/100*this.fullInkLength)}this.curInkLength=this.fullInkLength},r.prototype.UpdateBees=function(t){if(!(this.bees.length>=Math.max(3,this.nests.length*(9-2*this.nests.length)))){if(this.curBeeInterval>=this.beeInterval){this.curBeeInterval=0;for(var i=0;i<this.nests.length;i++){var n=this.nests[i],r=e.ItemPool.Inst.Pop([7,[n.x+n.exitPt.x,n.y+n.exitPt.y]],this.grp_game);this.bees.push(r),this.items.push(r)}}this.curBeeInterval+=t}},r.prototype.Update=function(t){var n;if(1!=this.isPause){switch(this.state){case i.Wait:for(var r=this.dogs.length-1;r>=0;r--){var s=this.dogs[r];s.Update(t)}break;case i.Drawing:for(var r=this.dogs.length-1;r>=0;r--){var s=this.dogs[r];s.Update(t)}1==this.isDrawing&&(SoundMain.Inst.SoundVolume("drawline_mp3",this.isValidDraw),this.isValidDraw=.01);break;case i.Timing:if(this.gameTime-=t,this.gameTime<=0)this.state=i.Over;else{this.UpdateBees(t);for(var r=0;r<this.bees.length;r++){var a=this.bees[r];a.UpdateBody(t,this.dogs)}this.grp_game.Update(t);for(var r=0;r<this.items.length;r++){var o=this.items[r];o.Update(t)}for(var h=!1,r=this.dogs.length-1;r>=0;r--){var s=this.dogs[r];s.Update(t),3==s.state||s.y>750?(this.dogs.splice(r,1),e.ItemPool.Inst.Push(s)):4==s.state&&s.animTime>=.5&&(h=!0)}(1==h||this.dogs.length<this.fullDogNum)&&(this.state=i.Over)}break;case i.Deading2:break;case i.Deading:break;case i.Over:for(var r=this.dogs.length-1;r>=0;r--){var s=this.dogs[r];s.Update(t)}if(this.stateTime>=.8){for(var h=!1,r=this.dogs.length-1;r>=0;r--){var s=this.dogs[r];4==s.state&&s.animTime>=.3&&(h=!0)}if(1==h||this.dogs.length<this.fullDogNum)SoundMain.Inst.PlaySound("fail_mp3"),this.onGameOver(2);else{SoundMain.Inst.PlaySound("level_win_mp3");var l=!1;MyStorage.Inst.playLv==MyStorage.Inst.curLv&&(MyStorage.Inst.curLv=Math.min(GameMgr.maxLv,MyStorage.Inst.curLv+1),l=!0);for(var g=3,r=0;3>r&&this.curInkLength<=this.inkLevels[r];r++)g--;g>(null!==(n=MyStorage.Inst.stars[MyStorage.Inst.playLv])&&void 0!==n?n:0)&&(MyStorage.Inst.stars[MyStorage.Inst.playLv]=g,l=!0),1==l&&MyStorage.Inst.Save(),MyStorage.Inst.playLv=Math.min(GameMgr.maxLv,MyStorage.Inst.playLv+1),this.onGameOver(1,Math.max(1,g))}}}for(var r=this.items.length-1;r>=0;r--){var o=this.items[r];o.Update(t)}this.stateTime+=t}},r.prototype.Stop=function(){this.grp_guide.visible=!1;for(var t=this.ani_guide.items.length-1;t>=0;t--){var i=this.ani_guide.items[t];i.stop()}SoundMain.Inst.StopSound("bees_mp3"),SoundMain.Inst.StopSound("drawline_mp3");for(var t=0;t<this.dogs.length;t++)e.ItemPool.Inst.Push(this.dogs[t]);this.dogs.length=0;for(var t=0;t<this.nests.length;t++)e.ItemPool.Inst.Push(this.nests[t]);this.nests.length=0;for(var t=0;t<this.items.length;t++)e.ItemPool.Inst.Push(this.items[t]);this.items.length=0,this.bees.length=0,this.grp_game.Stop(),Util.UnregistBtnAnim(this.img_pause),this.img_pause.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPause,this),Util.UnregistBtnAnim(this.grp_next),this.grp_next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapAdWin,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLineBegin,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onLineMove,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_END,this.onLineEnd,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onLineEnd,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onLineEnd,this)},r.prototype.onLineBegin=function(t){if(1!=this.isDrawing){1==platform.IsIOS&&(SoundMain.Inst.PlaySound("drawline_mp3",!0),SoundMain.Inst.SoundVolume("drawline_mp3",this.isValidDraw)),this.isDrawing=!0;var e=this.items[0];e.ClearLine(),this.rt_unableLine.visible=!1,this.state=i.Drawing,1==this.ptInValid({x:t.localX,y:t.localY})&&(e.DrawLine(t.localX,t.localY),this.lastDrawPt.x=t.localX,this.lastDrawPt.y=t.localY)}},r.prototype.onLineMove=function(t){if(0!=this.isDrawing)if(this.rt_unableLine.visible=!1,this.curInkLength<=0)this.onLineEnd(t);else if(1==this.ptInValid({x:t.localX,y:t.localY})){var e=this.items[0];this.curInkLength-=e.DrawLine(t.localX,t.localY);var i=Util.Dist(this.lastDrawPt,{x:t.localX,y:t.localY});this.curInkLength-=i,this.isValidDraw=Util.Clamp(i/20,.01,1),this.lastDrawPt.x=t.localX,this.lastDrawPt.y=t.localY}else{this.rt_unableLine.visible=!0,this.rt_unableLine.x=this.lastDrawPt.x,this.rt_unableLine.y=this.lastDrawPt.y;var n=t.localX-this.lastDrawPt.x,r=t.localY-this.lastDrawPt.y;this.rt_unableLine.width=Math.sqrt(n*n+r*r),this.rt_unableLine.rotation=Math.atan2(r,n)/Math.PI*180}},r.prototype.onLineEnd=function(t){if(0!=this.isDrawing){SoundMain.Inst.StopSound("drawline_mp3"),this.isDrawing=!1,this.rt_unableLine.visible=!1;var e=this.items[0];if(this.curInkLength<=0||1==this.ptInValid({x:t.localX,y:t.localY})&&e.DrawLine(t.localX,t.localY,!0),this.lastDrawPt.x=-1,1==e.EndDrawLine(this.fullInkLength-this.curInkLength)){if(this.state=i.Timing,1==this.grp_guide.visible){this.grp_guide.visible=!1;for(var n=this.ani_guide.items.length-1;n>=0;n--){var r=this.ani_guide.items[n];r.stop()}}}else this.state=i.Wait}},r.prototype.ptInValid=function(t){if(t.x<6||t.x>this.grp_game.width-6||t.y<6||t.y>this.grp_game.height-6)return!1;for(var e=1;e<this.items.length;e++){var i=this.items[e];if(1==i.IntersectMe(this.lastDrawPt.x<0?null:this.lastDrawPt,t))return!1}for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];if(1==n.IntersectMe(this.lastDrawPt.x<0?null:this.lastDrawPt,t))return!1}for(var e=0;e<this.nests.length;e++){var r=this.nests[e];if(1==r.IntersectMe(this.lastDrawPt.x<0?null:this.lastDrawPt,t))return!1}return!0},r}(eui.Component);e.Main=n,__reflect(n.prototype,"Scene.Game.Main",["eui.UIComponent","Base"])}(e=t.Game||(t.Game={})),window.Game=e}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Love;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.linePtNum=0,e.tempPt=new egret.Point,e.tempPt2=new egret.Point,e.tempPt3=new egret.Point,e.tempPt4=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=4,e._image=new egret.Sprite,e._image.zIndex=10,e.linePts=[],e}return __extends(e,t),e.prototype.Start=function(e){t.prototype.Start.call(this,null);var i=e[1];this._image.graphics.clear(),this.linePtNum=0;for(var n=0;n<i.length;n++){var r=i[n];(0==n||n==i.length-1||Util.Dist({x:r[0],y:r[1]},this.linePts[this.linePtNum-1])>=30)&&(null==this.linePts[this.linePtNum]&&(this.linePts[this.linePtNum]=new egret.Point),this.linePts[this.linePtNum].x=r[0],this.linePts[this.linePtNum].y=r[1],this.linePtNum++)}for(var s=0,a={x:0,y:0},n=0;n<this.linePtNum-1;n++){var o=this.linePts[n],h=this.linePts[n+1],l=Util.Dist(o,h);s+=l,a.x+=(o.x+h.x)/2*l,a.y+=(o.y+h.y)/2*l}a.x/=s,a.y/=s;for(var g=9999,u=-9999,p=-9999,c=9999,n=0;n<this.linePtNum;n++){var d=this.linePts[n];d.x-=a.x,d.y-=a.y,d.x<g&&(g=d.x),d.x>u&&(u=d.x),d.y<c&&(c=d.y),d.y>p&&(p=d.y)}this._image.width=u+10-(g-10),this._image.height=p+10-(c-10),this._image.anchorOffsetX=a.x-(g-10),this._image.anchorOffsetY=a.y-(c-10),this._image.graphics.lineStyle(8,0),this._image.graphics.beginFill(0,0);for(var n=0;n<i.length;n++){var r=i[n];0==n?this._image.graphics.moveTo(r[0]+10-g,r[1]+10-c):this._image.graphics.lineTo(r[0]+10-g,r[1]+10-c)}this._image.graphics.endFill(),this._body.mass=Util.Clamp(e[2]/500,2,5),this.pos={x:a.x,y:a.y};for(var n=0;n<this.linePtNum-1;n++){var o={x:this.linePts[n].x,y:-this.linePts[n].y},h={x:this.linePts[n+1].x,y:-this.linePts[n+1].y},m=new p2.Box({width:Util.Dist(o,h)/egret.p2Factor,height:10/egret.p2Factor});this._body.addShape(m,[(o.x+h.x)/2/egret.p2Factor,(o.y+h.y)/2/egret.p2Factor],Math.atan2(h.y-o.y,h.x-o.x))}},e.prototype.IntersectMe=function(t,e){this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),null!=t&&(this.tempPt2.x=t.x-this.x,this.tempPt2.y=t.y-this.y,Util.RotateVec(this.tempPt2,-this.rotation/180*Math.PI));for(var i=20,n=0;n<this.linePtNum-1;n++){var r=this.linePts[n],s=this.linePts[n+1],a={x:s.x-r.x,y:s.y-r.y};Util.Normalize(a);var o=Util.Dist(r,s)+10,h=Math.atan2(a.y,a.x);if(this.tempRect.x=-5,this.tempRect.y=0,this.tempRect.width=o,this.tempRect.height=i,this.tempPt3.x=this.tempPt.x-(r.x+a.y*i/2),this.tempPt3.y=this.tempPt.y-(r.y+-a.x*i/2),Util.RotateVec(this.tempPt3,-h),1==this.tempRect.containsPoint(this.tempPt3))return!0;if(null!=t&&(this.tempPt4.x=this.tempPt2.x-(r.x+a.y*i/2),this.tempPt4.y=this.tempPt2.y-(r.y+-a.x*i/2),Util.RotateVec(this.tempPt4,-h),1==Util.rectLineIntersect(this.tempRect,[this.tempPt3,this.tempPt4])))return!0}return!1},e}(egret.DisplayBody);t.Item8=e,__reflect(e.prototype,"Scene.Love.Item8",["IItem"]);var i=function(t){function e(){var e=t.call(this)||this;return e.id=0,e.drawPts=[],e.drawPtNum=0,e.shape=4,e._image=new egret.Sprite,e._image.zIndex=10,e._image.width=e._image.height=640,e}return __extends(e,t),e.prototype.recDrawPt=function(t,e,i){void 0===i&&(i=!1),null==this.drawPts[this.drawPtNum]&&(this.drawPts[this.drawPtNum]=new egret.Point),this.drawPtNum>0&&Util.Dist({x:t,y:e},this.drawPts[this.drawPtNum-1])<(0==i?30:5)||(this.drawPts[this.drawPtNum].x=t,this.drawPts[this.drawPtNum].y=e,this.drawPtNum++)},e.prototype.ClearLine=function(){for(;this._body.shapes.length>0;)this._body.removeShape(this._body.shapes[0]);this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=this._image.height/2,this.pos={x:this._image.parent.width/2,y:this._image.parent.height/2},this.rotation=0,this.drawPtNum=0,this._image.graphics.clear(),this._image.graphics.lineStyle(8,0)},e.prototype.DrawLine=function(t,e,i){void 0===i&&(i=!1);var n=0;return this.recDrawPt(t,e,i),0==this.drawPtNum?this._image.graphics.moveTo(t,e):(this._image.graphics.beginFill(0,0),this._image.graphics.lineTo(t,e),this._image.graphics.endFill()),n},e.prototype.EndDrawLine=function(t){if(this.drawPtNum<=1)return this._image.graphics.clear(),!1;for(var e=0,i={x:0,y:0},n=0;n<this.drawPtNum-1;n++){var r=this.drawPts[n],s=this.drawPts[n+1],a=Util.Dist(r,s);e+=a,i.x+=(r.x+s.x)/2*a,i.y+=(r.y+s.y)/2*a}i.x/=e,i.y/=e,this._image.anchorOffsetX=i.x,this._image.anchorOffsetY=i.y,this._body.mass=Util.Clamp(t/500,2,5),this.pos={x:i.x,y:i.y};for(var n=0;n<this.drawPtNum-1;n++){var r={x:this.drawPts[n].x-i.x,y:-(this.drawPts[n].y-i.y)},s={x:this.drawPts[n+1].x-i.x,y:-(this.drawPts[n+1].y-i.y)},o=new p2.Box({width:Util.Dist(r,s)/egret.p2Factor,height:10/egret.p2Factor});this._body.addShape(o,[(r.x+s.x)/2/egret.p2Factor,(r.y+s.y)/2/egret.p2Factor],Math.atan2(s.y-r.y,s.x-r.x))}return!0},e.prototype.Start=function(e){t.prototype.Start.call(this,e),this.pos={x:e[1][0],y:e[1][1]},this.rotation=0},e.prototype.IntersectMe=function(t,e){return!1},e}(egret.DisplayBody);t.Item0=i,__reflect(i.prototype,"Scene.Love.Item0",["IItem"]);var n=function(t){function e(){var e=t.call(this)||this;return e.id=1,e.sex=1,e.animTime=0,e._bodyRadius=70,e.shape=0,e._image=new egret.Bitmap,e._image.zIndex=9,e._image.width=e._image.height=100,e._image.anchorOffsetX=e._image.width/2,e._image.anchorOffsetY=e._image.height/2,e._bodyRadius=e._image.width/2*.973,e}return __extends(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t){switch(t){case 0:0==this.sex?this._image.texture=RES.getRes("game1_json.doggirl_1_png"):this._image.texture=RES.getRes("game0_json.dog_1_1_png");break;case 1:0==this.sex?this._image.texture=RES.getRes("game1_json.doggirl_kiss_1_png"):this._image.texture=RES.getRes("game1_json.dog_kiss_1_1_png")}this._state=t,this.animTime=0}},enumerable:!1,configurable:!0}),e.prototype.Start=function(e){this._rndTime=100*Math.random();var i=new p2.Circle({radius:this._bodyRadius/egret.p2Factor});this._body.addShape(i),t.prototype.Start.call(this,e),this.pos={x:e[1][0],y:e[1][1]},this.rotation=0,this.animTime=0,this.state=0},e.prototype.Update=function(e){switch(t.prototype.Update.call(this,e),this.state){case 0:0==this.sex?this._image.texture=RES.getRes("game1_json.doggirl_"+(Math.floor(6*(this.animTime+this._rndTime)%7)+1)+"_png"):this._image.texture=RES.getRes("game0_json.dog_1_"+(Math.floor(6*(this.animTime+this._rndTime)%7)+1)+"_png");break;case 1:0==this.sex?this._image.texture=RES.getRes("game1_json.doggirl_kiss_"+(Math.floor(6*(this.animTime+this._rndTime)%3)+1)+"_png"):this._image.texture=RES.getRes("game1_json.dog_kiss_1_"+(Math.floor(6*(this.animTime+this._rndTime)%3)+1)+"_png")}this.animTime+=e},e.prototype.onContact=function(t){0==this.state&&t instanceof e&&t.sex!=this.sex&&(SoundMain.Inst.PlaySound("like_mp3"),this.state=1)},e.prototype.IntersectMe=function(t,e){if(null==t){var i=Util.Dist(e,this);if(i<=this._bodyRadius+5)return!0}else if(Util.DistPtToSegment(this,[t,e])<=this._bodyRadius+5)return!0;return!1},e}(egret.DisplayBody);t.Item1=n,__reflect(n.prototype,"Scene.Love.Item1",["IItem"]);var r=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.id=3,e.tempPt=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=1,e._image=new egret.Bitmap,e._image.texture=RES.getRes("game0_json.ground_png"),e._image.anchorOffsetY=16,e._image.scale9Grid=new egret.Rectangle(1,33,98,66),e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this.rotation=t[4],this._image.width=t[2],this._image.height=t[3],this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=(this._image.height-16)/2+16;var e=new p2.Box({width:this._image.width/egret.p2Factor,height:(this._image.height-16)/egret.p2Factor});this._body.addShape(e)},e.prototype.IntersectMe=function(t,e){if(this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),this.tempRect.x=-this._image.width/2-5,this.tempRect.y=-(this._image.height-16)/2-5,this.tempRect.width=this._image.width+10,this.tempRect.height=this._image.height-16+10,1==this.tempRect.containsPoint(this.tempPt))return!0;if(null!=t){var i={x:t.x-this.x,y:t.y-this.y};if(Util.RotateVec(i,-this.rotation/180*Math.PI),1==Util.rectLineIntersect(this.tempRect,[i,this.tempPt]))return!0}return!1},e}(egret.DisplayBody);t.Item3=r,__reflect(r.prototype,"Scene.Love.Item3",["IItem"]);var s=function(t){function e(){var e=t.call(this,p2.Body.STATIC,0,0)||this;return e.shapeType=1,e.id=4,e.tempPt=new egret.Point,e.tempRect=new egret.Rectangle,e.shape=1,e._image=new eui.Rect,e._image.fillColor=11830881,e}return __extends(e,t),e.prototype.Start=function(t){this.pos={x:t[1][0],y:t[1][1]},this.rotation=t[4],this._image.width=t[2],this._image.height=t[3],this._image.anchorOffsetX=this._image.width/2,this._image.anchorOffsetY=this._image.height/2;var e=new p2.Box({width:this._image.width/egret.p2Factor,height:this._image.height/egret.p2Factor});this._body.addShape(e)},e.prototype.IntersectMe=function(t,e){if(this.tempPt.x=e.x-this.x,this.tempPt.y=e.y-this.y,Util.RotateVec(this.tempPt,-this.rotation/180*Math.PI),this.tempRect.x=-this._image.width/2-5,this.tempRect.y=-this._image.height/2-5,this.tempRect.width=this._image.width+10,this.tempRect.height=this._image.height+10,1==this.tempRect.containsPoint(this.tempPt))return!0;if(null!=t){var i={x:t.x-this.x,y:t.y-this.y};if(Util.RotateVec(i,-this.rotation/180*Math.PI),1==Util.rectLineIntersect(this.tempRect,[i,this.tempPt]))return!0}return!1},e}(egret.DisplayBody);t.Item4=s,__reflect(s.prototype,"Scene.Love.Item4",["IItem"]);var a=[null,n,null,r,s,null,null,null,e],o=function(){function t(){this.itemMap=new Map}return Object.defineProperty(t,"Inst",{get:function(){if(null==t._inst){var e=new t;t._inst=e}return t._inst},enumerable:!1,configurable:!0}),t.prototype.Pop=function(t,e){var i,n=t[0],r=this.itemMap.get(n);return null==r?i=new a[n]:(i=r.pop(),r.length<=0&&this.itemMap["delete"](n)),e.AddChild(i),i.Start(t),i},t.prototype.Push=function(t){t.Stop(),null!=t.parent&&t.parent.RemoveChild(t),0==this.itemMap.has(t.id)&&this.itemMap.set(t.id,[]);var e=this.itemMap.get(t.id);e.push(t)},t}();t.ItemPool=o,__reflect(o.prototype,"Scene.Love.ItemPool",[])}(e=t.Love||(t.Love={})),window.Love=e}(i||(i={})),window.Scene=i},function(t,e){var i,i=window.Scene;!function(t){var e,e=window.Love;!function(e){var i;!function(t){t[t.Null=0]="Null",t[t.Wait=1]="Wait",t[t.Drawing=2]="Drawing",t[t.Wait2=3]="Wait2",t[t.Over=4]="Over"}(i||(i={})),window.PlayState=i;var n=function(n){function r(){var t=n.call(this)||this;return t.isPause=!1,t.stateTime=0,t._state=i.Null,t.fullInkLength=0,t._curInkLength=0,t.inkLevels=[],t.inkPercents=[],t.isDrawing=!1,t.isValidDraw=.01,t.drawNum=0,t.curUseInk=0,t.lastDrawPt=new egret.Point(-1,-1),t.tempPt=new egret.Point,t.tempRect=new egret.Rectangle,t}return __extends(r,n),r.prototype.onTapPause=function(){SoundMain.Inst.PlaySound("button_mp3"),this.onGameOver(0)},r.prototype.onGameOver=function(e,i){return void 0===i&&(i=0),__awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(r){switch(r.label){case 0:return platform.showInterstitialAd(),1==this.isPause?[2]:(this.isPause=!0,[4,t.Pause.Inst.Start(GMain.Inst,e,i)]);case 1:return n=r.sent(),0==n?this.isPause=!1:5==n?this.isPause=!1:4==n?GMain.Inst.SwitchState(MainState.COVER):1==n&&GMain.Inst.SwitchState(MainState.GAME),[2]}})})},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(t){if(this._state!=t){switch(this._state==i.Drawing&&(this.lineSpr.touchEnabled=!1),t){case i.Wait:this.lineSpr.touchEnabled=!0;for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];n.state=0}break;case i.Drawing:break;case i.Over:for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];5==n.state&&(n.state=0)}}this.stateTime=0,this._state=t}},enumerable:!1,configurable:!0}),r.prototype.Start=function(){this.grp_game=new egret.DisplayBodyContainer,this.addChildAt(this.grp_game,2),this.grp_game.Start({x:0,y:500}),this.grp_game.x=this.width/2,this.grp_game.y=this.height/2,Util.RegistBtnAnim(this.img_pause),this.img_pause.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPause,this),Util.RegistBtnAnim(this.grp_next),this.grp_next.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapAdWin,this),Util.RegistBtnAnim(this.grp_restart),this.grp_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapRestart,this),this.lineSpr=new egret.Sprite,this.addChild(this.lineSpr),this.lineSpr.width=this.lineSpr.height=640,this.lineSpr.anchorOffsetX=this.lineSpr.width/2,this.lineSpr.anchorOffsetY=this.lineSpr.height/2,this.lineSpr.x=this.width/2,this.lineSpr.y=this.height/2,this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLineBegin,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onLineMove,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_END,this.onLineEnd,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onLineEnd,this),this.grp_touch.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onLineEnd,this),this.items=[],this.dogs=[];var t=MyStorage.Inst.playLv,n=GameMgr.Inst.LvData[t];this.initInk(n.star);for(var r=n.item,s=0;s<r.length;s++){var a=r[s],o=e.ItemPool.Inst.Pop(a,this.grp_game);o instanceof e.Item1?this.dogs.push(o):this.items.push(o)}var h=this.dogs[0],l=this.dogs[1];if(h.x<l.x?(h._image.scaleX=-1,h.sex=1,l._image.scaleX=1,l.sex=0):(h._image.scaleX=1,h.sex=0,l._image.scaleX=-1,l.sex=1),this.fullDogNum=this.dogs.length,this.state=i.Wait,this.rt_unableLine.visible=!1,0==MyStorage.Inst.playLv&&0==MyStorage.Inst.curLv){this.grp_guide.visible=!0;for(var s=this.ani_guide.items.length-1;s>=0;s--){var g=this.ani_guide.items[s];g.play()}}else this.grp_guide.visible=!1},r.prototype.onTapRestart=function(){return SoundMain.Inst.PlaySound("button_mp3"),MyStorage.Inst.power<3?void platform.showToast("骨头不足"):(t.Common.Inst.UsePower(),void GMain.Inst.SwitchState(MainState.GAME))},r.prototype.onTapAdWin=function(){return SoundMain.Inst.PlaySound("button_mp3"),MyStorage.Inst.power<5?void platform.showToast("骨头不足"):(MyStorage.Inst.playLv==MyStorage.Inst.curLv&&(MyStorage.Inst.curLv=Math.min(GameMgr.maxLv,MyStorage.Inst.curLv+1)),t.Common.Inst.UsePower(5),MyStorage.Inst.playLv=Math.min(GameMgr.maxLv,MyStorage.Inst.playLv+1),void this.onGameOver(1))},Object.defineProperty(r.prototype,"curInkLength",{get:function(){return this._curInkLength},set:function(t){this._curInkLength=Math.max(0,t),this.pb_ink.value=this._curInkLength/this.fullInkLength*100;for(var e=0;3>e;e++){var i=this.pb_ink["img_star"+(2-e)];this._curInkLength>=this.inkLevels[e]?i.texture=RES.getRes("uiart_json.star2_png"):i.texture=RES.getRes("uiart_json.star_png")}},enumerable:!1,configurable:!0}),r.prototype.initInk=function(t){this.inkLevels=[],this.fullInkLength=2e3;for(var e=2;e>=0;e--){var i=this.pb_ink["img_star"+e];i.x=t[e+1]/100*this.pb_ink.width,this.inkLevels.push(t[e+1]/100*this.fullInkLength)}this.curInkLength=this.fullInkLength},r.prototype.Update=function(t){var n;if(1!=this.isPause){switch(this.state){case i.Wait2:this.grp_game.Update(t);for(var r=0,s=this.dogs.length-1;s>=0;s--){var a=this.dogs[s];if(a.Update(t),a.y>750){this.dogs.splice(s,1),e.ItemPool.Inst.Push(a),this.state=i.Over;break}1==a.state&&r++}r>=2&&(this.state=i.Over);break;case i.Wait:case i.Drawing:for(var s=this.dogs.length-1;s>=0;s--){var a=this.dogs[s];a.Update(t)}1==this.isDrawing&&(SoundMain.Inst.SoundVolume("drawline_mp3",this.isValidDraw),this.isValidDraw=.01);break;case i.Over:for(var s=this.dogs.length-1;s>=0;s--){var a=this.dogs[s];a.Update(t)}if(this.stateTime>=.8){for(var r=0,s=this.dogs.length-1;s>=0;s--){var a=this.dogs[s];1==a.state&&r++}if(2>r||this.dogs.length<this.fullDogNum)SoundMain.Inst.PlaySound("fail_mp3"),this.onGameOver(2);else{SoundMain.Inst.PlaySound("level_win_mp3");var o=!1;MyStorage.Inst.playLv==MyStorage.Inst.curLv&&(MyStorage.Inst.curLv=Math.min(GameMgr.maxLv,MyStorage.Inst.curLv+1),o=!0);for(var h=3,s=0;3>s&&this.curInkLength<=this.inkLevels[s];s++)h--;h>(null!==(n=MyStorage.Inst.stars[MyStorage.Inst.playLv])&&void 0!==n?n:0)&&(MyStorage.Inst.stars[MyStorage.Inst.playLv]=h,o=!0),1==o&&MyStorage.Inst.Save(),MyStorage.Inst.playLv=Math.min(GameMgr.maxLv,MyStorage.Inst.playLv+1),this.onGameOver(1,Math.max(1,h))}}}for(var s=this.items.length-1;s>=0;s--){var l=this.items[s];l.Update(t)}this.stateTime+=t}},r.prototype.Stop=function(){this.grp_guide.visible=!1;for(var t=this.ani_guide.items.length-1;t>=0;t--){var i=this.ani_guide.items[t];i.stop()}this.onLineEnd(null);for(var t=0;t<this.dogs.length;t++)e.ItemPool.Inst.Push(this.dogs[t]);this.dogs.length=0;for(var t=0;t<this.items.length;t++)e.ItemPool.Inst.Push(this.items[t]);this.items.length=0,this.grp_game.Stop(),Util.UnregistBtnAnim(this.img_pause),this.img_pause.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapPause,this),Util.RegistBtnAnim(this.grp_restart),this.grp_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapRestart,this),Util.UnregistBtnAnim(this.grp_next),this.grp_next.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapAdWin,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onLineBegin,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onLineMove,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_END,this.onLineEnd,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onLineEnd,this),this.grp_touch.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onLineEnd,this),this.lineSpr.parent.removeChild(this.lineSpr)},r.prototype.onLineBegin=function(t){1!=this.isDrawing&&(1==platform.IsIOS&&(SoundMain.Inst.PlaySound("drawline_mp3",!0),SoundMain.Inst.SoundVolume("drawline_mp3",0)),this.isDrawing=!0,this.drawNum=0,this.drawPts=[],this.curUseInk=0,this.rt_unableLine.visible=!1,this.state=i.Drawing,this.lineSpr.graphics.clear(),1==this.ptInValid({x:t.localX,y:t.localY})&&(this.lineSpr.graphics.lineStyle(8,0),this.lineSpr.graphics.beginFill(0,0),this.lineSpr.graphics.moveTo(t.localX,t.localY),this.lineSpr.graphics.endFill(),this.lastDrawPt.x=t.localX,this.lastDrawPt.y=t.localY,this.drawPts.push([t.localX,t.localY])))},r.prototype.onLineMove=function(t){if(0!=this.isDrawing)if(this.rt_unableLine.visible=!1,this.curInkLength<=0)this.onLineEnd(t);else if(1==this.ptInValid({x:t.localX,y:t.localY})){var e=Util.Dist(this.lastDrawPt,{x:t.localX,y:t.localY});this.curInkLength-=e,this.curUseInk+=e,this.isValidDraw=Util.Clamp(e/20,.01,1),this.lineSpr.graphics.lineStyle(8,0),this.lineSpr.graphics.beginFill(0,0),this.lineSpr.graphics.lineTo(t.localX,t.localY),this.lineSpr.graphics.endFill(),this.lastDrawPt.x=t.localX,this.lastDrawPt.y=t.localY,this.drawPts.push([t.localX,t.localY])}else{this.rt_unableLine.visible=!0,this.rt_unableLine.x=this.lastDrawPt.x,this.rt_unableLine.y=this.lastDrawPt.y;var i=t.localX-this.lastDrawPt.x,n=t.localY-this.lastDrawPt.y;this.rt_unableLine.width=Math.sqrt(i*i+n*n),this.rt_unableLine.rotation=Math.atan2(n,i)/Math.PI*180}},r.prototype.onLineEnd=function(t){if(0!=this.isDrawing){if(SoundMain.Inst.StopSound("drawline_mp3"),this.isDrawing=!1,this.rt_unableLine.visible=!1,this.curInkLength<=0||null==t||1==this.ptInValid({x:t.localX,y:t.localY})&&(this.lineSpr.graphics.lineStyle(8,0),this.lineSpr.graphics.beginFill(0,0),this.lineSpr.graphics.lineTo(t.localX,t.localY),this.lineSpr.graphics.endFill(),this.lastDrawPt.x=t.localX,this.lastDrawPt.y=t.localY,this.drawPts.push([t.localX,t.localY])),this.lastDrawPt.x=-1,this.curUseInk>30){var n=e.ItemPool.Inst.Pop([8,this.drawPts,this.curUseInk],this.grp_game);if(this.items.push(n),this.drawPts=[],1==this.grp_guide.visible){this.grp_guide.visible=!1;for(var r=this.ani_guide.items.length-1;r>=0;r--){var s=this.ani_guide.items[r];s.stop()}}}this.curUseInk=0,this.state=i.Wait2,this.lineSpr.graphics.clear()}},r.prototype.ptInValid=function(t){if(t.x<6||t.x>this.grp_game.width-6||t.y<6||t.y>this.grp_game.height-6)return!1;for(var e=0;e<this.items.length;e++){var i=this.items[e];if(1==i.IntersectMe(this.lastDrawPt.x<0?null:this.lastDrawPt,t))return!1}for(var e=0;e<this.dogs.length;e++){var n=this.dogs[e];if(1==n.IntersectMe(this.lastDrawPt.x<0?null:this.lastDrawPt,t))return!1}return!0},r}(eui.Component);e.Main=n,__reflect(n.prototype,"Scene.Love.Main",["eui.UIComponent","Base"])}(e=t.Love||(t.Love={})),window.Love=e}(i||(i={})),window.Scene=i},function(t,e){var i=function(t){function e(){var e=t.call(this)||this;return e.width=e.height=1e3,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.graphics.lineStyle(1,0),e.graphics.beginFill(0),e.graphics.moveTo(0,e.height/2),e.graphics.lineTo(e.width,e.height/2),e.graphics.moveTo(e.width/2,0),e.graphics.lineTo(e.width/2,e.height),e.graphics.endFill(),e.bodyMap=new Map,e}return __extends(e,t),Object.defineProperty(e,"Inst",{get:function(){if(null==e._inst){var t=new e;e._inst=t}return e._inst},enumerable:!1,configurable:!0}),e.prototype.Start=function(t,i){if(e.factor=i,null!=this.parent){if(this.parent==t)return;this.parent.removeChild(this)}t.addChild(this),this.x=t.width/2,this.y=t.height/2},e.prototype.AddBody=function(t){var i=new egret.DisplayObjectContainer;i.width=100,i.height=100,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i),i.x=this.width/2+t.position[0]*e.factor,i.y=this.height/2-t.position[1]*e.factor,i.rotation=-t.angle/Math.PI*180,this.bodyMap.set(t,i);for(var n=0;n<t.shapes.length;n++){var r=t.shapes[n];if(r instanceof p2.Box){var s=this.AddBox(r);i.addChild(s),s.x=i.width/2+r.position[0]*e.factor,s.y=i.height/2-r.position[1]*e.factor,s.rotation=-r.angle/Math.PI*180}else if(r instanceof p2.Circle){var s=this.AddCircle(r);i.addChild(s),s.x=i.width/2+r.position[0]*e.factor,s.y=i.height/2-r.position[1]*e.factor,s.rotation=-r.angle/Math.PI*180}else if(r instanceof p2.Plane){var s=this.AddPlane(r);i.addChild(s),s.x=i.width/2+r.position[0]*e.factor,s.y=i.height/2-r.position[1]*e.factor,s.rotation=-r.angle/Math.PI*180}else if(r instanceof p2.Convex){var s=this.AddConvex(r);i.addChild(s),s.x=i.width/2+r.position[0]*e.factor,s.y=i.height/2-r.position[1]*e.factor,s.rotation=-r.angle/Math.PI*180}}},e.prototype.RemoveBody=function(t){var e=this.bodyMap.get(t);null!=e&&(this.bodyMap["delete"](t),this.removeChild(e))},e.prototype.AddBox=function(t){var i=new egret.Shape;i.width=i.height=100,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2;var n=t.width*e.factor,r=t.height*e.factor;return i.graphics.beginFill(16711680,.2),i.graphics.drawRect(i.width/2-n/2,i.height/2-r/2,n,r),i.graphics.endFill(),i},e.prototype.AddCircle=function(t){var i=new egret.Shape;i.width=i.height=100,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2;var n=t.radius*e.factor;return i.graphics.beginFill(16711680,.5),i.graphics.drawCircle(i.width/2,i.height/2,n),i.graphics.endFill(),i},e.prototype.AddConvex=function(t){var i=new egret.Shape;i.width=i.height=100;var n=i.anchorOffsetX=i.width/2,r=i.anchorOffsetY=i.height/2;i.graphics.beginFill(16711680,.5);var s=n+t.vertices[0][0]*e.factor,a=r-t.vertices[0][1]*e.factor;i.graphics.moveTo(s,a);for(var o=1;o<t.vertices.length;o++)i.graphics.lineTo(n+t.vertices[o][0]*e.factor,r-t.vertices[o][1]*e.factor);return i.graphics.lineTo(s,a),i.graphics.endFill(),i},e.prototype.AddPlane=function(t){var e=new egret.Shape;
e.width=e.height=100,e.anchorOffsetX=e.width/2;var i=this.width,n=500;return this.addChild(e),e.graphics.beginFill(8947848,.5),e.graphics.drawRect(e.width/2-i/2,0,i,n),e.graphics.endFill(),e},e.prototype.Update=function(t){var i,n;try{for(var r=__values(this.bodyMap),s=r.next();!s.done;s=r.next()){var a=s.value,o=a[0],h=a[1];h.x=this.width/2+o.position[0]*e.factor,h.y=this.height/2-o.position[1]*e.factor,h.rotation=-o.angle/Math.PI*180}}catch(l){i={error:l}}finally{try{s&&!s.done&&(n=r["return"])&&n.call(r)}finally{if(i)throw i.error}}},e.prototype.Stop=function(){var t,e;null!=this.parent&&this.parent.removeChild(this);try{for(var i=__values(this.bodyMap),n=i.next();!n.done;n=i.next()){var r=n.value;this.removeChild(r[1])}}catch(s){t={error:s}}finally{try{n&&!n.done&&(e=i["return"])&&e.call(i)}finally{if(t)throw t.error}}this.bodyMap.clear()},e}(egret.Sprite);window.p2Render=i,__reflect(i.prototype,"p2Render",[])}]);